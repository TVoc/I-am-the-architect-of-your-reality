\section{Element catalog}\label{app:catalog}\todo{write external interfaces}
In this section, we provide an alphabetically ordered catalog of all components and the interfaces they offer.

\subsection{AuthenticableUserManager}
\begin{itemize}
    \item \textbf{Description:} Responsible for storing the details of all Customer Administrators, Registered Recipients and eDocs Administrators. Also verifies login details and stores login tokens.
    \item \textbf{Super-component:} \ttt{UserManagementSubsystem}.
    \item \textbf{Sub-components:} \ttt{AuthenticationManager}, \ttt{COAdminDatabase}, \ttt{eDocsAdminDatabase}, \ttt{RegisteredRecipientDatabase}, \ttt{UserInfoEditor}.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
	\item COAdminInfoManagement
    \begin{itemize}
		\item \texttt{void verifyComplete(List<CustomerAdministratorRegistrationDetails> details) throws IncompleteDetailsException}
        \begin{itemize}
            \item Effect: Verifies whether all entries in \ttt{details} are complete.
            \item Exceptions:
            \begin{itemize}
                \item IncompleteDetailsException: Some details are missing (e-mail address, password, document type). It is indicated which entries in \ttt{details} are incomplete.
            \end{itemize}
        \end{itemize}

        \item \texttt{void verifyNotExists(List<CustomerAdministratorRegistrationDetails> details) throws AlreadyExistsException}
        \begin{itemize}
            \item Effect: Verifies whether any entry in \ttt{details} conflicts with Customer Administrators that already exist.
            \item Exceptions:
            \begin{itemize}
                \item AlreadyExistsException: Some entries in \ttt{details} correspond with Customer Administrators that already exist. It is indicated which entries conflict.
            \end{itemize}
        \end{itemize}

        \item \texttt{void registerAdministrators(List<CustomerAdministratorRegistrationDetails> details)}
        \begin{itemize}
            \item Effect: Registers all Customer Administrators with corresponding details found in \ttt{details}.
            \item Exceptions: None
        \end{itemize}

		\item \texttt{void unregisterAdministrators(CustomerOrganizationID coID) throws NoAdminsOfCustomerOrganizationException}
        \begin{itemize}
            \item Effect: Unregisters all Customer Administrators corresponding to the Customer Organization identified by \ttt{coID}.
            \item Exceptions:
			\begin{itemize}
				\item NoAdminsOfCustomerOrganizationException: There are no Customer Administrators of the Customer Organization identified by \ttt{coID}.
			\end{itemize}
        \end{itemize}

		\item \texttt{EmailAddress getCOAdminEmail(CustomerOrganizationID coID, DocumentType type) throws NoSuchAdministratorException}
		    \begin{itemize}
                \item Effect: Retrieves the e-mail address of the Customer Administrator of the Customer Organization identified by \ttt{coID} who is responsible for documents of \ttt{type}.
                \item Exceptions:
				\begin{itemize}
					\item NoSuchAdministratorException: There is no Customer Administrator responsible for \ttt{type}.
				\end{itemize}
            \end{itemize}
    \end{itemize}

    \item RecipientInfoManagement
    \begin{itemize}
        \item \texttt{boolean isRegistered(RecipientID recID)}
        \begin{itemize}
            \item Effect: Indicates whether \ttt{recID} corresponds to a Registered Recipient.
            \item Exceptions: None
        \end{itemize}

		\item \texttt{String getNameOf(RecipientID recID) throws NoSuchRecipientException}
        \begin{itemize}
            \item Effect: Retrieves the first and last name of the Registered Recipient identified by \ttt{recID}.
            \item Exceptions:
			\begin{itemize}
				\item NoSuchRecipientException: There is no Registered Recipient corresponding to \ttt{recID}.
			\end{itemize}
        \end{itemize}

		\item \texttt{PostalAddress getPostalAddressOf(RecipientID recID) throws NoSuchRecipientException}
        \begin{itemize}
            \item Effect: Retrieves the postal address of the Registered Recipient identified by \ttt{recID}.
            \item Exceptions:
			\begin{itemize}
				\item NoSuchRecipientException: There is no Registered Recipient corresponding to \ttt{recID}.
			\end{itemize}
        \end{itemize}

		\item \texttt{void verifyComplete(RegistrationDetails details) throws IncompleteRecipientDetailsException}
        \begin{itemize}
            \item Effect: Verifies that \ttt{details} is complete.
            \item Exceptions:
			\begin{itemize}
				\item IncompleteRecipientDetailsException: Some details are missing (e-mail address, password, first or last name, postal address).
			\end{itemize}
        \end{itemize}
		
        \item \texttt{void verifyNotExists(RegistrationDetails details) throws AlreadyRegisteredException}
        \begin{itemize}
            \item Effect: Verifies that \ttt{details} does not conflict with Recipients that have already been registered
            \item Exceptions:
			\begin{itemize}
				\item AlreadyRegisteredException: There already is a registration corresponding to \ttt{details} (e-mail address is already in use).
			\end{itemize}
        \end{itemize}

		\item \texttt{void registerRecipient(RegistrationDetails details)}
        \begin{itemize}
            \item Effect: Registers a new Registered Recipient with the corresponding \ttt{details}.
            \item Exceptions: None
        \end{itemize}
    \end{itemize}

    \item UIAuthManagement
    \begin{itemize}
        \item \texttt{void authenticate(LoginCredentials cred) throws AuthException}
        \begin{itemize}
            \item Effect: Authenticates the login attempt with the credentials contained in \ttt{cred}. If successful, generates a login token valid for a limited time.
            \item Exceptions:
			\begin{itemize}
				\item AuthException: Either the account specified in \ttt{cred} does not exists or the password is incorrect.
			\end{itemize}
        \end{itemize}
    \end{itemize}
\end{itemize}

\subsection{AuthenticationManager}
\begin{itemize}
    \item \textbf{Description:} Responsible for verifying attempted logins. Also stores login tokens that are valid during a certain time interval.
    \item \textbf{Super-component:} \ttt{AuthenticableUserManager}.
    \item \textbf{Sub-components:} None.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item UIAuthManagement
    \begin{itemize}
        \item \texttt{void authenticate(LoginCredentials cred) throws AuthException}
        \begin{itemize}
            \item Effect: Authenticates the login attempt with the credentials contained in \ttt{cred}. If successful, generates a login token valid for a limited time.
            \item Exceptions:
			\begin{itemize}
				\item AuthException: Either the account specified in \ttt{cred} does not exists or the password is incorrect.
			\end{itemize}
        \end{itemize}
    \end{itemize}
\end{itemize}

\subsection{ConnectionManager}
\begin{itemize}
	\item \textbf{Description:} The \ttt{ConnectionManager} accepts connections from automated Customer Organization or Social Secretary systems so they may submit raw data batches
	\item \textbf{Super-component:} \ttt{SubmissionSubsystem}.
	\item \textbf{Sub-components:} None
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
	\item ExternalRawDataSubmission
	\begin{itemize}
		\item \texttt{void openConnection(AuthToken authToken) throws InvalidAuthTokenException}
		\begin{itemize}
			\item Effect: Opens a connection, after which the caller may submit batches of raw data/meta-data.
			\item Exceptions:
			\begin{itemize}
				\item InvalidAuthTokenException: \ttt{authToken} is not registered in the system.
			\end{itemize}
		\end{itemize}
		
		\item \texttt{void submitPlannedBatchDetails(BatchDetails batchDetails) throws NoConnectionException, InvalidBatchException}
		\begin{itemize}
			\item Effect: Verifies whether the Customer Organization (or Social Secretary acting on the Customer Organization's behalf) may submit a batch specified by \ttt{batchDetails}.
			\item Exceptions:
			\begin{itemize}
				\item NoConnectionException: \texttt{openConnection} was not called earlier
				\item InvalidBatchException: One of the following occurs:
				\begin{enumerate}
					\item The Customer Organization on whose behalf the batch would be submitted may not submit the specified type of documents.
					\item If this concerns a recurring batch, the number of entries contained in the batch to be submitted exceeds the number of allowed entries.
					\item If this concerns a recurring batch, the Customer Organization is trying to submit the batch too early.
					\item If it is indicated this recurring batch contains corrections of entries the Customer Organization tried to submit earlier, there is no such earlier submission of a recurring batch.
					\item If it is indicated this recurring batch contains corrections of entries the Customer Organization tried to submit earlier, the total number of entries submitted as part of that recurring batch would exceed the number of allowed entries.
				\end{enumerate}
			\end{itemize}
		\end{itemize}
		
		\item \texttt{void submitRawData(RawDataBatch batch) throws NoConnectionException, NoCorrespondingPlannedBatchException, BatchVerificationException}
		\begin{itemize}
			\item Effect: Accepts a raw data batch, verifies the individual entries and generates jobs from them
			\item Exceptions:
			\begin{itemize}
				\item NoConnectionException: \texttt{openConnection} was not called earlier.
				\item NoCorrespondingPlannedBatchException: there was no call to \texttt{submitPlannedBatchDetails} with a \texttt{BatchDetails} object that corresponds to the given batch
				\item BatchVerficationException: One of the following occurs:
				\begin{enumerate}
					\item The batch was improperly formatted (for example, the batch was a zipfile that could not be opened)
					\item Some individual entries are incorrect; the thrown exception indicates which entries are incorrect and why. Note that all entries that did pass verification were processed correctly.
				\end{enumerate} 
			\end{itemize}
		\end{itemize}
	\end{itemize}
\end{itemize}

\subsection{COAdminDatabase}
\begin{itemize}
    \item \textbf{Description:} Responsible for storing the accounts of all Customer Administrators.
    \item \textbf{Super-component:} \ttt{AuthenticableUserManager}.
    \item \textbf{Sub-components:} None.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item ExtendedCOAdminInfoManagement
    \begin{itemize}
        \item \texttt{void verifyNotExists(List<CustomerAdministratorRegistrationDetails> details) throws AlreadyExistsException}
        \begin{itemize}
            \item Effect: Verifies whether any entry in \ttt{details} conflicts with Customer Administrators that already exist.
            \item Exceptions:
            \begin{itemize}
                \item AlreadyExistsException: Some entries in \ttt{details} correspond with Customer Administrators that already exist. It is indicated which entries conflict.
            \end{itemize}
        \end{itemize}

        \item \texttt{void registerAdministrators(List<CustomerAdministratorRegistrationDetails> details)}
        \begin{itemize}
            \item Effect: Registers all Customer Administrators with corresponding details found in \ttt{details}.
            \item Exceptions: None
        \end{itemize}

		\item \texttt{void unregisterAdministrators(CustomerOrganizationID coID) throws NoAdminsOfCustomerOrganizationException}
        \begin{itemize}
            \item Effect: Unregisters all Customer Administrators corresponding to the Customer Organization identified by \ttt{coID}.
            \item Exceptions:
			\begin{itemize}
				\item NoAdminsOfCustomerOrganizationException: There are no Customer Administrators of the Customer Organization identified by \ttt{coID}.
			\end{itemize}
        \end{itemize}

		\item \texttt{EmailAddress getCOAdminEmail(CustomerOrganizationID coID, DocumentType type) throws NoSuchAdministratorException}
		    \begin{itemize}
                \item Effect: Retrieves the e-mail address of the Customer Administrator of the Customer Organization identified by \ttt{coID} who is responsible for documents of \ttt{type}.
                \item Exceptions:
				\begin{itemize}
					\item NoSuchAdministratorException: There is no Customer Administrator responsible for \ttt{type}.
				\end{itemize}
            \end{itemize}

		\item \texttt{LoginDetails lookupAuthDetails(CustomerAdministratorID caID) throws NoSuchAdministratorException}
		    \begin{itemize}
                \item Effect: Retrieves the \ttt{LoginDetails} of the Customer Administrator identified by \ttt{caID}.
                \item Exceptions:
				\begin{itemize}
					\item NoSuchAdministratorException: There is no Customer Administrator corresponding to \ttt{caID}.
				\end{itemize}
            \end{itemize}
    \end{itemize}
\end{itemize}

\subsection{COInfoFacade}
\begin{itemize}
    \item \textbf{Description:} Responsible for forwarding requests for Customer Organization details to the right components.
    \item \textbf{Super-component:} \ttt{UserManagementSubsystem}.
    \item \textbf{Sub-components:} None.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item COInfoManagement
    \begin{itemize}
		\item \texttt{boolean verifyExists(CustomerOrganizationID coID)}
		    \begin{itemize}
                \item Effect: Indicates whether a Customer Organization corresponding to \ttt{coID} has been registered.
                \item Exceptions: None
            \end{itemize}
		
        \item \texttt{Template getTemplate(CustomerOrganizationID coID, DocumentType docType, TimeStamp matchTime) throws NoSuchCustomerOrganizationException, NoSuchTemplateException}
        \begin{itemize}
            \item Effect: Retrieves the \ttt{Template} for documents of the type \ttt{docType} of the Customer Organization identified by \ttt{coID}. The exact version retrieved is the most recent version earlier than \ttt{matchTime}.
            \item Exceptions:
            \begin{itemize}
                \item NoSuchTemplateException: The template as described in the above Effect clause does not exist.
				\item NoSuchCustomerOrganizationException: There is no Customer Organization corresponding to \ttt{coID}.
            \end{itemize}
        \end{itemize}

		\item \texttt{void updateTemplate(CustomerOrganizationID coID, Template template, DocumentType type) throws NoSuchCustomerOrganizationException, InvalidDocumentTypeException}
		    \begin{itemize}
                \item Effect: Updates the template for documents of \ttt{type} for the Customer Organization identified by \ttt{coID}.
                \item Exceptions:
				\begin{itemize}
					\item InvalidDocumentTypeException: The Customer Organization identified by \ttt{coID} is not allowed to generate documents of \ttt{type}.
					\item NoSuchCustomerOrganizationException: There is no Customer Organization corresponding to \ttt{coID}.
				\end{itemize}
            \end{itemize}

        \item \texttt{Key getKey(CustomerOrganizationID coID) throws NoSuchCustomerOrganizationException}
		    \begin{itemize}
                \item Effect: Retrieves the signing key of the Customer Organization identified by \ttt{coID}.
                \item Exceptions:
				\begin{itemize}
					\item NoSuchCustomerOrganizationException: There is no Customer Organization corresponding to \ttt{coID}.
				\end{itemize}
            \end{itemize}

		\item \texttt{Priority getDefaultPriority(CustomerOrganizationID coID) throws NoSuchCustomerOrganizationException}
		    \begin{itemize}
                \item Effect: Retrieves the default priority of the Customer Organization identified by \ttt{coID}.
                \item Exceptions:
				\begin{itemize}
					\item NoSuchCustomerOrganizationException: There is no Customer Organization corresponding to \ttt{coID}.
				\end{itemize}
            \end{itemize}

		\item \texttt{boolean queryReceiptTracking(CustomerOrganizationID coID) throws NoSuchCustomerOrganizationException}
		    \begin{itemize}
                \item Effect: Indicates whether the Customer Organization identified by \ttt{coID} has enabled receipt tracking.
                \item Exceptions:
				\begin{itemize}
					\item NoSuchCustomerOrganizationException: There is no Customer Organization corresponding to \ttt{coID}.
				\end{itemize}
            \end{itemize}

		\item \texttt{boolean canGenerateDocumentsOfType(CustomerOrganizationID coID, DocumentType type) throws NoSuchCustomerOrganizationException}
		    \begin{itemize}
                \item Effect: Indicates whether the Customer Organization identified by \ttt{coID} may generate documents of \ttt{type}.
                \item Exceptions:
				\begin{itemize}
					\item NoSuchCustomerOrganizationException: There is no Customer Organization corresponding to \ttt{coID}.
				\end{itemize}
            \end{itemize}

		\item \texttt{List<DocumentType> getAllAllowedDocTypes(CustomerOrganizationID coID) throws NoSuchCustomerOrganizationException}
		    \begin{itemize}
                \item Effect: Retrieves the document types the Customer Organization identified by \ttt{coID} may generate.
                \item Exceptions:
				\begin{itemize}
					\item NoSuchCustomerOrganizationException: There is no Customer Organization corresponding to \ttt{coID}.
				\end{itemize}
            \end{itemize}

		\item \texttt{EmailAddress getCOAdminEmail(CustomerOrganizationID coID, DocumentType type) throws NoSuchCustomerOrganizationException, NoSuchAdministratorException}
		    \begin{itemize}
                \item Effect: Retrieves the e-mail address of the Customer Administrator of the Customer Organization identified by \ttt{coID} who is responsible for documents of \ttt{type}.
                \item Exceptions:
				\begin{itemize}
					\item NoSuchCustomerOrganizationException: There is no Customer Organization corresponding to \ttt{coID}.
					\item NoSuchAdministratorException: There is no Customer Administrator responsible for \ttt{type}.
				\end{itemize}
            \end{itemize}

		\item \texttt{BankAccountNumber getCOBankAccountNumber(CustomerOrganizationID coID) throws NoSuchCustomerOrganizationException}
		    \begin{itemize}
                \item Effect: Retrieves the bank account number of the Customer Organization identified by \ttt{coID} which the eDocs system should bill.
                \item Exceptions:
				\begin{itemize}
					\item NoSuchCustomerOrganizationException: There is no Customer Organization corresponding to \ttt{coID}.
				\end{itemize}
            \end{itemize}

		\item \texttt{PrintParameterObject getPrintParameters(CustomerOrganizationID coID) throws NoSuchCustomerOrganizationException}
		    \begin{itemize}
                \item Effect: Retrieves the \ttt{PrintParameterObject} of the Customer Organization identified by \ttt{coID}.
                \item Exceptions:
				\begin{itemize}
					\item NoSuchCustomerOrganizationException: There is no Customer Organization corresponding to \ttt{coID}.
				\end{itemize}
            \end{itemize}

		\item \texttt{RecurringBatchSpecification getRecurringBatchSpecification(CustomerOrganizationID coID, RecurringBatchID) throws NoSuchCustomerOrganizationException, NoSuchRecurringBatchException}
		    \begin{itemize}
                \item Effect: Retrieves the \ttt{RecurringBatchSpecification} of the recurring batch identified by \ttt{RecurringBatchID}.
                \item Exceptions:
					\begin{itemize}
						\item NoSuchRecurringBatchException: Either there is no recurring batch matching \ttt{RecurringBatchID} or that batch does not belong to the Customer Organization identified by \ttt{coID}.
						\item NoSuchCustomerOrganizationException: There is no Customer Organization corresponding to \ttt{coID}.
					\end{itemize}
            \end{itemize}

		\item \texttt{void registerNewCustomerOrganization(CustomerOrganizationRegistrationDetails details) throws IncorrectRegistrationDetailsException}
		    \begin{itemize}
                \item Effect: Registers a new Customer Organization with the details specified in \ttt{details}.
                \item Exceptions:
				\begin{itemize}
					\item IncorrectRegistrationDetailsException: Either \ttt{details} is incomplete (e.g. no signing key) or incorrect (e.g. the e-mail address for a new Customer Administrator has already been used for another Customer Administrator). The exception indicates what exactly went wrong.
				\end{itemize}
            \end{itemize}

		\item \texttt{void unregisterCustomerOrganization(CustomerOrganizationID coID) throws NoSuchCustomerOrganizationException}
		    \begin{itemize}
                \item Effect: Unregisters the Customer Organization identified by \ttt{coID}.
                \item Exceptions:
				\begin{itemize}
					\item NoSuchCustomerOrganizationException: There is no Customer Organization corresponding to \ttt{coID}.
				\end{itemize}
            \end{itemize}
    \end{itemize}
\end{itemize}

\subsection{CommunicationSubsystem}\todo{JobStorageSubsystem no longer needs ErrorSignaling}
\begin{itemize}
    \item \textbf{Description:} Responsible for receiving all inbound communication and sending most outbound communication (e.g. sending mails) that is not highly specific to the domain of discourse (i.e. generation and delivery of documents). Most of that communication involves e-mail.
    \item \textbf{Super-component:} None.
    \item \textbf{Sub-components:} \ttt{ErrorEmailDeliveryHandler}, \ttt{ExternalNotificationAcceptor}, \ttt{NotificationEmailDeliveryHandler}.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item ErrorSignaling
    \begin{itemize}
        \item \texttt{void notifyOperatorOfPDSDBReplicaFailure(String name, TimeStamp dateTime)}
        \begin{itemize}
            \item Effect: Notifies the eDocs administrators of the failure of the \ttt{PDSDBReplica} identified by \ttt{name} at the time specified by \ttt{dateTime}
            \item Exceptions: None
        \end{itemize}

        \item \texttt{void notifyOperatorOfGeneratorFailure(String name, TimeStamp dateTime)}
        \begin{itemize}
            \item Effect: Notifies the eDocs administrators of the failure of the \ttt{Generator} identified by \ttt{name} at the time specified by \ttt{dateTime}
            \item Exceptions: None
        \end{itemize}

		\item \texttt{void notifyOperatorOfDocumentDBReplicaFailure(String name, TimeStamp dateTime)}
        \begin{itemize}
            \item Effect: Notifies the eDocs administrators of the failure of the \ttt{DocumentDBReplica} identified by \ttt{name} at the time specified by \ttt{dateTime}
            \item Exceptions: None
        \end{itemize}
    \end{itemize}

    \item ExternalNotificationHandling
    \begin{itemize}
        \item \texttt{void signalEmailDeliveryFailure(Email email)}
        \begin{itemize}
            \item Effect: Extracts the context out of the given e-mail (e.g. if it concerns document delivery, extracts JobID) and handles it appropriately (e.g. setting the status of the Job to "Delivery failed").
            \item Exceptions: None
        \end{itemize}

		\item \texttt{void confirmDelivery(DocumentName doc)}
        \begin{itemize}
            \item Effect: Extracts the \ttt{JobID} from \ttt{doc} (it is assumed that the \ttt{JobID} is a part of the \ttt{DocumentName}) and sets the status of the document to "Delivery confirmed".
            \item Exceptions: None
        \end{itemize}
    \end{itemize}

	\item MessageManagement
    \begin{itemize}
        \item \texttt{void notifyOperatorOfZoomitFailure(TimeStamp dateTime)}
        \begin{itemize}
            \item Effect: Notifies the eDocs Administrators of the failure of the Zoomit service at the time specified by \ttt{dateTime}.
            \item Exceptions: None
        \end{itemize}
		
		\item \texttt{void notifyCustomerAdministratorOfZoomitDeliveryFailure(ZoomitDeliveryErrorReport error)}
        \begin{itemize}
            \item Effect: Looks up the Customer Organization that submitted the \ttt{Job} identified by \ttt{jobID} contained in \ttt{error}, identifies the Customer Administrator responsible for the document type of the \ttt{Job} and sends an e-mail containing \ttt{error}. Also updates the status to "Delivery failed"
            \item Exceptions: None
        \end{itemize}

        \item \texttt{void generationError(JobId jobID, GenerationErrorReport error)}
		    \begin{itemize}
                \item Effect: Looks up the Customer Organization that submitted the \ttt{Job} identified by \ttt{jobID}, identifies the Customer Administrator responsible for the document type of the \ttt{Job} and sends an e-mail containing \ttt{error}. Also updates the status to "Generation failed"
                \item Exceptions: None
            \end{itemize}

		\item \texttt{void notifyDownloadLinkExpiration(JobId jobID)}
		    \begin{itemize}
                \item Effect: Looks up the Customer Organization that submitted the \ttt{Job} identified by \ttt{jobID}, identifies the Customer Administrator responsible for the document type of the \ttt{Job} and sends an e-mail indicating that the download link corresponding to the document expired. Also updates the status to "Document link expired".
                \item Exceptions: None
            \end{itemize}

		\item \texttt{void submitEmail(Email email)}
        \begin{itemize}
            \item Effect: Submits the given e-mail to the external e-mail provider.
            \item Exceptions: None
        \end{itemize}
    \end{itemize}
\end{itemize}

\subsection{Completer}
\begin{itemize}
    \item \textbf{Description:} Serve request for given jobIDs to return all data concerning the job's generation.
    \item \textbf{Super-component:} the \ttt{DocumentGenerationManager}.
    \item \textbf{Sub-components:} None.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item Compl
    \begin{itemize}
        \item \texttt{returntType1 operation1(ParamType param) throws SomeException}
        \begin{itemize}
            \item Effect: Describe the effect of the operation
            \item Exceptions:
            \begin{itemize}
                \item SomeException: Describe when the exception is thrown.
            \end{itemize}
        \end{itemize}

        \item \texttt{void operation2(ParamType2 param)}
		    \begin{itemize}
                \item Effect: Describe the effect of the operation
                \item Exceptions: None
            \end{itemize}
    \end{itemize}

    \item InterfaceB
    \begin{itemize}
        \item \texttt{returntType2 operation3()}
        \begin{itemize}
            \item Effect: Describe the effect of the operation
            \item Exceptions: None
        \end{itemize}
    \end{itemize}
\end{itemize}

\subsection{CustomerOrganizationDatabase}
\begin{itemize}
    \item \textbf{Description:} Responsible for storing all details of Customer Organizations (excluding templates, signing key and Customer Administrator details).
    \item \textbf{Super-component:} \ttt{UserManagementSubsystem}.
    \item \textbf{Sub-components:} None.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item CODetailsManagement
    \begin{itemize}
		\item \texttt{boolean verifyExists(CustomerOrganizationID coID)}
		    \begin{itemize}
                \item Effect: Indicates whether a Customer Organization corresponding to \ttt{coID} has been registered.
                \item Exceptions: None
            \end{itemize}

		\item \texttt{Priority getDefaultPriority(CustomerOrganizationID coID) throws NoSuchCustomerOrganizationException}
		    \begin{itemize}
                \item Effect: Retrieves the default priority of the Customer Organization identified by \ttt{coID}.
                \item Exceptions:
				\begin{itemize}
					\item NoSuchCustomerOrganizationException: There is no Customer Organization corresponding to \ttt{coID}.
				\end{itemize}
            \end{itemize}

		\item \texttt{boolean queryReceiptTracking(CustomerOrganizationID coID) throws NoSuchCustomerOrganizationException}
		    \begin{itemize}
                \item Effect: Indicates whether the Customer Organization identified by \ttt{coID} has enabled receipt tracking.
                \item Exceptions:
				\begin{itemize}
					\item NoSuchCustomerOrganizationException: There is no Customer Organization corresponding to \ttt{coID}.
				\end{itemize}
            \end{itemize}

		\item \texttt{boolean canGenerateDocumentsOfType(CustomerOrganizationID coID, DocumentType type) throws NoSuchCustomerOrganizationException}
		    \begin{itemize}
                \item Effect: Indicates whether the Customer Organization identified by \ttt{coID} may generate documents of \ttt{type}.
                \item Exceptions:
				\begin{itemize}
					\item NoSuchCustomerOrganizationException: There is no Customer Organization corresponding to \ttt{coID}.
				\end{itemize}
            \end{itemize}

		\item \texttt{List<DocumentType> getAllAllowedDocTypes(CustomerOrganizationID coID) throws NoSuchCustomerOrganizationException}
		    \begin{itemize}
                \item Effect: Retrieves the document types the Customer Organization identified by \ttt{coID} may generate.
                \item Exceptions:
				\begin{itemize}
					\item NoSuchCustomerOrganizationException: There is no Customer Organization corresponding to \ttt{coID}.
				\end{itemize}
            \end{itemize}

		\item \texttt{BankAccountNumber getCOBankAccountNumber(CustomerOrganizationID coID) throws NoSuchCustomerOrganizationException}
		    \begin{itemize}
                \item Effect: Retrieves the bank account number of the Customer Organization identified by \ttt{coID} which the eDocs system should bill.
                \item Exceptions:
				\begin{itemize}
					\item NoSuchCustomerOrganizationException: There is no Customer Organization corresponding to \ttt{coID}.
				\end{itemize}
            \end{itemize}

		\item \texttt{PrintParameterObject getPrintParameters(CustomerOrganizationID coID) throws NoSuchCustomerOrganizationException}
		    \begin{itemize}
                \item Effect: Retrieves the \ttt{PrintParameterObject} of the Customer Organization identified by \ttt{coID}.
                \item Exceptions:
				\begin{itemize}
					\item NoSuchCustomerOrganizationException: There is no Customer Organization corresponding to \ttt{coID}.
				\end{itemize}
            \end{itemize}

		\item \texttt{RecurringBatchSpecification getRecurringBatchSpecification(CustomerOrganizationID coID, RecurringBatchID) throws NoSuchCustomerOrganizationException, NoSuchRecurringBatchException}
		    \begin{itemize}
                \item Effect: Retrieves the \ttt{RecurringBatchSpecification} of the recurring batch identified by \ttt{RecurringBatchID}.
                \item Exceptions:
					\begin{itemize}
						\item NoSuchRecurringBatchException: Either there is no recurring batch matching \ttt{RecurringBatchID} or that batch does not belong to the Customer Organization identified by \ttt{coID}.
						\item NoSuchCustomerOrganizationException: There is no Customer Organization corresponding to \ttt{coID}.
					\end{itemize}
            \end{itemize}

		\item \texttt{void registerNewCustomerOrganization(CustomerOrganizationRegistrationDetails details)}
		    \begin{itemize}
                \item Effect: Registers a new Customer Organization with the details specified in \ttt{details}; extracts all information excluding templates, signing key and Customer Administrator details.
                \item Exceptions: None
            \end{itemize}

		\item \texttt{void unregisterCustomerOrganization(CustomerOrganizationID coID) throws NoSuchCustomerOrganizationException}
		    \begin{itemize}
                \item Effect: Unregisters the Customer Organization identified by \ttt{coID}.
                \item Exceptions:
				\begin{itemize}
					\item NoSuchCustomerOrganizationException: There is no Customer Organization corresponding to \ttt{coID}.
				\end{itemize}
            \end{itemize}
    \end{itemize}
\end{itemize}

\subsection{DeliverySubsystem}
\begin{itemize}
    \item \textbf{Description:} Responsible for handling delivery of a document. Depending on directives from the \ttt{GeneratedDocumentHandler}, it must ensure that documents arrive at their intended destination. Also bills Customer Organizations for documents originating from non-recurring batches.
    \item \textbf{Super-component:} None.
    \item \textbf{Sub-components:} \ttt{DocumentDistributor}, \ttt{EmailDeliveryChannel}, \ttt{PDSDeliveryChannel}, \ttt{PostalDeliveryChannel}, \ttt{ZoomitDeliveryChannel}.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item DocumentDelivery
    \begin{itemize}
        \item \texttt{void deliveryDocument(JobID docID, Document document, DeliveryMetaData deliveryData)}
        \begin{itemize}
            \item Effect: Selects the appropriate delivery channel for the given document from \ttt{deliveryData}.
            \item Exceptions: None
        \end{itemize}
    \end{itemize}
\end{itemize}

\subsection{DocumentDB}
\begin{itemize}
    \item \textbf{Description:} Stores all documents ever generated by the eDocs system.
    \item \textbf{Super-component:} \ttt{DocumentStorageSubsystem}.
    \item \textbf{Sub-components:} \ttt{DocumentDBReplica}, \ttt{DocumentDBReplicationManager}.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item DocumentManagement
	\begin{itemize}
		\item \texttt{void storeDocument(Document doc, DocumentMetaData metaData)}
		\begin{itemize}
			\item Effect: Stores the specified document and its meta-data in the database.
			\item Exceptions: None
		\end{itemize}

		\item \texttt{void storeDocuments(List<Tuple<Document doc, DocumentMetaData metaData>> docs)}
		\begin{itemize}
			\item Effect: Stores all Documents in \ttt{docs} in the database.
			\item Exceptions: None
		\end{itemize}
		
		\item \texttt{Document fetchDocument(JobID docID) throws NoSuchDocumentException}
		\begin{itemize}
			\item Effect: Fetches the Document matching \ttt{docID} and returns it.
			\item Exceptions: 
			\begin{itemize}
				\item NoSuchDocumentException: there is no document matching \ttt{docID}.
			\end{itemize}
		\end{itemize}

		\item \texttt{List<Tuple<Document, DocumentMetaData>> fetchDocumentsAndMetaData(List<JobID> docIDs) throws NoSuchDocumentException}
		\begin{itemize}
			\item Effect: Fetches the Documents matching \ttt{docID} and returns them along with their \ttt{DocumentMetaData}.
			\item Exceptions: 
			\begin{itemize}
				\item NoSuchDocumentException: One of the requested documents does not exist in the database.
			\end{itemize}
		\end{itemize}

		\item \texttt{List<Tuple<Document, DocumentMetaData>> getAllDocumentsFor(DeliveryMethod deliveryMethod, DeliveryAddress deliveryAddress) throws NoSuchRecipientException}
		\begin{itemize}
			\item Effect: Fetches the Documents and their corresponding DocumentMetaData for the Recipient specified by \ttt{deliveryAddress}. What type of address is checked for is determined by \ttt{deliveryMethod}
			\item Exceptions: 
			\begin{itemize}
				\item NoSuchReciopientException: there are no documents for the Recipient specified by \ttt{RecipientAddress}.
			\end{itemize}
		\end{itemize}
	\end{itemize}

    \item DownloadLookup
	\begin{itemize}
		\item \texttt{void fetchDocument(JobID docID, UserSession session) throws NoSuchDocumentException}
		\begin{itemize}
			\item Effect: Fetches the Document matching \ttt{docID} and returns it directly to the user's software via \ttt{session}.
			\item Exceptions:
			\begin{itemize}
				\item NoSuchDocumentException: there is no document matching \ttt{docID}. This exception is propagated directly to the user's software via \ttt{session}.
			\end{itemize}
		\end{itemize}
	\end{itemize}
\end{itemize}

\subsection{DocumentDBReplica}
\begin{itemize}
    \item \textbf{Description:} Stores all documents ever generated by the eDocs system. Must answer to pings lest it be marked as failed.
    \item \textbf{Super-component:} \ttt{DocumentDB}.
    \item \textbf{Sub-components:} None.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item DocumentManagement
	\begin{itemize}
		\item \texttt{void storeDocument(Document doc, DocumentMetaData metaData)}
		\begin{itemize}
			\item Effect: Stores the specified document and its meta-data in the database.
			\item Exceptions: None
		\end{itemize}

		\item \texttt{void storeDocuments(List<Tuple<Document doc, DocumentMetaData metaData>> docs)}
		\begin{itemize}
			\item Effect: Stores all Documents in \ttt{docs} in the database.
			\item Exceptions: None
		\end{itemize}
		
		\item \texttt{Document fetchDocument(JobID docID) throws NoSuchDocumentException}
		\begin{itemize}
			\item Effect: Fetches the Document matching \ttt{docID} and returns it.
			\item Exceptions: 
			\begin{itemize}
				\item NoSuchDocumentException: there is no document matching \ttt{docID}.
			\end{itemize}
		\end{itemize}

		\item \texttt{List<Tuple<Document, DocumentMetaData>> fetchDocumentsAndMetaData(List<JobID> docIDs) throws NoSuchDocumentException}
		\begin{itemize}
			\item Effect: Fetches the Documents matching \ttt{docID} and returns them along with their \ttt{DocumentMetaData}.
			\item Exceptions: 
			\begin{itemize}
				\item NoSuchDocumentException: One of the requested documents does not exist in the database.
			\end{itemize}
		\end{itemize}

		\item \texttt{List<Tuple<Document, DocumentMetaData>> getAllDocumentsFor(DeliveryMethod deliveryMethod, DeliveryAddress deliveryAddress) throws NoSuchRecipientException}
		\begin{itemize}
			\item Effect: Fetches the Documents and their corresponding DocumentMetaData for the Recipient specified by \ttt{deliveryAddress}. What type of address is checked for is determined by \ttt{deliveryMethod}
			\item Exceptions: 
			\begin{itemize}
				\item NoSuchReciopientException: there are no documents for the Recipient specified by \ttt{RecipientAddress}.
			\end{itemize}
		\end{itemize}
	\end{itemize}

    \item DownloadLookup
	\begin{itemize}
		\item \texttt{void fetchDocument(JobID docID, UserSession session) throws NoSuchDocumentException}
		\begin{itemize}
			\item Effect: Fetches the Document matching \ttt{docID} and returns it directly to the user's software via \ttt{session}.
			\item Exceptions:
			\begin{itemize}
				\item NoSuchDocumentException: there is no document matching \ttt{docID}. This exception is propagated directly to the user's software via \ttt{session}.
			\end{itemize}
		\end{itemize}
	\end{itemize}

    \item Ping
	\begin{itemize}
		\item \texttt{Echo ping()}
		\begin{itemize}
			\item Effect: Returns an Echo to reassure the caller that the callee is still available.
			\item Exceptions: None.
		\end{itemize}
	\end{itemize}
\end{itemize}

\subsection{DocumentDBReplicationManager}
\begin{itemize}
    \item \textbf{Description:} Manages its \ttt{DocumentDBReplica}s. Must ping the \ttt{DocumentDBReplica}s upon suspicion of failure and issue an error notification upon timeout of ping.
    \item \textbf{Super-component:} \ttt{DocumentDB}.
    \item \textbf{Sub-components:} None.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item DocumentManagement
	\begin{itemize}
		\item \texttt{void storeDocument(Document doc, DocumentMetaData metaData)}
		\begin{itemize}
			\item Effect: Stores the specified document and its meta-data in the database.
			\item Exceptions: None
		\end{itemize}

		\item \texttt{void storeDocuments(List<Tuple<Document doc, DocumentMetaData metaData>> docs)}
		\begin{itemize}
			\item Effect: Stores all Documents in \ttt{docs} in the database.
			\item Exceptions: None
		\end{itemize}
		
		\item \texttt{Document fetchDocument(JobID docID) throws NoSuchDocumentException}
		\begin{itemize}
			\item Effect: Fetches the Document matching \ttt{docID} and returns it.
			\item Exceptions: 
			\begin{itemize}
				\item NoSuchDocumentException: there is no document matching \ttt{docID}.
			\end{itemize}
		\end{itemize}

		\item \texttt{List<Tuple<Document, DocumentMetaData>> fetchDocumentsAndMetaData(List<JobID> docIDs) throws NoSuchDocumentException}
		\begin{itemize}
			\item Effect: Fetches the Documents matching \ttt{docID} and returns them along with their \ttt{DocumentMetaData}.
			\item Exceptions: 
			\begin{itemize}
				\item NoSuchDocumentException: One of the requested documents does not exist in the database.
			\end{itemize}
		\end{itemize}

		\item \texttt{List<Tuple<Document, DocumentMetaData>> getAllDocumentsFor(DeliveryMethod deliveryMethod, DeliveryAddress deliveryAddress) throws NoSuchRecipientException}
		\begin{itemize}
			\item Effect: Fetches the Documents and their corresponding DocumentMetaData for the Recipient specified by \ttt{deliveryAddress}. What type of address is checked for is determined by \ttt{deliveryMethod}
			\item Exceptions: 
			\begin{itemize}
				\item NoSuchReciopientException: there are no documents for the Recipient specified by \ttt{RecipientAddress}.
			\end{itemize}
		\end{itemize}
	\end{itemize}

    \item DownloadLookup
	\begin{itemize}
		\item \texttt{void fetchDocument(JobID docID, UserSession session) throws NoSuchDocumentException}
		\begin{itemize}
			\item Effect: Fetches the Document matching \ttt{docID} and returns it directly to the user's software via \ttt{session}.
			\item Exceptions:
			\begin{itemize}
				\item NoSuchDocumentException: there is no document matching \ttt{docID}. This exception is propagated directly to the user's software via \ttt{session}.
			\end{itemize}
		\end{itemize}
	\end{itemize}
\end{itemize}

\subsection{DocumentDistributor}
\begin{itemize}
    \item \textbf{Description:} Receives documents along with delivery details, and based on these details, hands the document to the required \ttt{DeliveryChannel}.
    \item \textbf{Super-component:} \ttt{DeliverySubsystem}.
    \item \textbf{Sub-components:} None.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item DocumentDelivery
    \begin{itemize}
        \item \texttt{void deliveryDocument(JobID docID, Document document, DeliveryMetaData deliveryData)}
        \begin{itemize}
            \item Effect: Selects the appropriate delivery channel for the given document from \ttt{deliveryData}.
            \item Exceptions: None
        \end{itemize}
    \end{itemize}
\end{itemize}

\subsection{DocumentGenerationManager}
\begin{itemize}
    \item \textbf{Description:} The component responsible for managing jobs in the \ttt{DocumentGenerationSubsystem}, and handing them to the \ttt{Generator}s. Also monitors these \ttt{Generator}s and signals when one fails. Has capability to query for data of generation jobs.
    \item \textbf{Super-component:} None.
    \item \textbf{Sub-components:} \ttt{DocumentGenerationManger}, \ttt{}
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item JobManagement
    \begin{itemize}
        \item \texttt{void submitJobs(List<Tuple<JobID,TimeStamp>> jobs)}
        \begin{itemize}
            \item Effect: Add the list of jobs with given deadline to the internal scheduler of the subsystem so they can be generated.
            \item Exceptions: None
        \end{itemize}
    \end{itemize}
\end{itemize}

\subsection{DocumentGenerationSubsystem}
\begin{itemize}
    \item \textbf{Description:} The subsystem responsible for generating a document from Raw Data and Batch Metadata. Retrieves the necessary Raw Data from the \ttt{JobStorageSubsystem}.
    \item \textbf{Super-component:} None.
    \item \textbf{Sub-components:} \ttt{DocumentGenerationManger}, \ttt{}
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item JobManagement
    \begin{itemize}
        \item \texttt{void submitJobs(List<Tuple<JobID,TimeStamp>> jobs)}
        \begin{itemize}
            \item Effect: Add the list of jobs with given deadline to the internal scheduler of the subsystem so they can be generated.
            \item Exceptions: None
        \end{itemize}
    \end{itemize}
\end{itemize}

\subsection{DocumentStorageHandler} 
\begin{itemize}
    \item \textbf{Description:} Receives documents to be stored and stores them in \ttt{DocumentDB} and also in \ttt{PDSDB}, if directed to.
    \item \textbf{Super-component:} \ttt{DocumentStorageSubsystem}.
    \item \textbf{Sub-components:} \ttt{GeneratedDocumentManager}, \ttt{PDSCache}.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item DocumentStorage
	\begin{itemize}
		\item \texttt{void storeDocument(Document doc, BatchMetaData batchData, RawDataMetaData rawData, boolean toPDS)}
		\begin{itemize}
			\item Effect: Constructs a \ttt{DocumentMetaData} object from \ttt{batchData} and \ttt{rawData} and stores the given document in the \ttt{DocumentDB} (and also the \ttt{PDSDB} if \ttt{toPDS} is true).
			\item Exceptions: None
		\end{itemize}
		
		\item \texttt{Document fetchDocument(JobID docID) throws NoSuchDocumentException}
		\begin{itemize}
			\item Effect: Fetches the Document matching \ttt{docID} from the \ttt{DocumentDB} and returns it together with its meta-data.
			\item Exceptions: 
			\begin{itemize}
				\item NoSuchDocumentException: there is no document matching \ttt{docID}.
			\end{itemize}
		\end{itemize}
	\end{itemize}

	\item PDSContentManagement
	\begin{itemize}
		\item \texttt{void fillPDS(RecipientID recipient) throws NoSuchRecipientException}
		\begin{itemize}
			\item Effect: Fetches all documents addressed to the specified Recipient and stores them in the \ttt{PDSDB}.
			\item Exceptions:
			\begin{itemize}
				\item NoSuchRecipientException: There are no documents stored in the document storage that are addressed to the specified Recipient.
			\end{itemize}
		\end{itemize}
				
		\item \texttt{void purgePDSOfDocumentsOf(RecipientID recipient) throws NoSuchRecipientException}
		\begin{itemize}
			\item Effect: Removes all documents addressed to the specified Recipient from the \ttt{PDSDB}.
			\item Exceptions:
			\begin{itemize}
				\item NoSuchRecipientException: There are no documents stored in the Personal Document Store database that are addressed to the specified Recipient.
			\end{itemize}
		\end{itemize}
	\end{itemize}
\end{itemize}

\subsection{DocumentStorageSubsystem}
\begin{itemize}
	\item \textbf{Description:} Responsible for storing documents and answering lookup queries.
	\item \textbf{Super-component:} None.
	\item \textbf{Sub-components:} \ttt{DocumentDB}, \ttt{DocumentStorageHandler}, \ttt{PDSDB}.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
	\item DocumentStorage
	\begin{itemize}
		\item \texttt{void storeDocument(Document doc, BatchMetaData batchData, RawDataMetaData rawData, boolean toPDS)}
		\begin{itemize}
			\item Effect: Constructs a \ttt{DocumentMetaData} object from \ttt{batchData} and \ttt{rawData} and stores the given document in the document database (and also the Personal Document Store database if \ttt{toPDS} is true).
			\item Exceptions: None
		\end{itemize}

		\item \texttt{void storeDocuments(List<Tuple<Document doc, DocumentMetaData metaData>> docs)}
		\begin{itemize}
			\item Effect: Stores all Documents in \ttt{docs} in the database.
			\item Exceptions: None
		\end{itemize}
		
		\item \texttt{Document fetchDocument(JobID docID) throws NoSuchDocumentException}
		\begin{itemize}
			\item Effect: Fetches the Document matching \ttt{docID} from the database and returns it.
			\item Exceptions: 
			\begin{itemize}
				\item NoSuchDocumentException: there is no document matching \ttt{docID}.
			\end{itemize}
		\end{itemize}
	\end{itemize}
	
	\item DownloadLookup
	\begin{itemize}
		\item \texttt{void fetchDocument(JobID docID, UserSession session) throws NoSuchDocumentException}
		\begin{itemize}
			\item Effect: Fetches the Document matching \ttt{docID} from the database and returns it directly to the user's software via \ttt{session}.
			\item Exceptions:
			\begin{itemize}
				\item NoSuchDocumentException: there is no document matching \ttt{docID}. This exception is propagated directly to the user's software via \ttt{session}.
			\end{itemize}
		\end{itemize}
	\end{itemize}
	
	\item PDSContentManagement
	\begin{itemize}
		\item \texttt{void fillPDSWithDocumentsOf(RecipientID recipient) throws NoSuchRecipientException}
		\begin{itemize}
			\item Effect: Fetches all documents addressed to the specified Recipient and stores them in the Personal Document Store database
			\item Exceptions:
			\begin{itemize}
				\item NoSuchRecipientException: There are no documents stored in the document storage that are addressed to the specified Recipient.
			\end{itemize}
		\end{itemize}
				
		\item \texttt{void purgePDSOfDocumentsOf(RecipientID recipient) throws NoSuchRecipientException}
		\begin{itemize}
			\item Effect: Removes all documents addressed to the specified Recipient from the Personal Document Store database.
			\item Exceptions:
			\begin{itemize}
				\item NoSuchRecipientException: There are no documents stored in the Personal Document Store database that are addressed to the specified Recipient.
			\end{itemize}
		\end{itemize}
	\end{itemize}
	
	\item PDSLookup
	\begin{itemize}
		\item \texttt{void fetchDocument(JobID docID, UserSession session) throws NoSuchDocumentException}
		\begin{itemize}
			\item Effect: Fetches the document specified by \ttt{docID} and returns it directly to the user's software via \ttt{session}.
			\item Exceptions:
			\begin{itemize}
				\item NoSuchDocumentException: The document specified by \ttt{docID} does not exist. This exception is propagated directly to the user's software via \ttt{session}.
			\end{itemize}
		\end{itemize}
				
		\item \texttt{void performLookupQuery(DocumentQueryParameter query, UserSession session)}
		\begin{itemize}
			\item Effect: Computes which of the Recipient's documents matches \ttt{query} and returns the resulting list of \ttt{DocumentMetaData} objects directly to the user's software via \ttt{session}. Note that this list may be empty if none of the Recipient's documents match.
			\item Exceptions: None.
		\end{itemize}
	\end{itemize}

	\item Ping
	\begin{itemize}
		\item \texttt{Echo ping()}
		\begin{itemize}
			\item Effect: Returns an Echo to reassure the caller that the callee is still available.
			\item Exceptions: None.
		\end{itemize}
	\end{itemize}
\end{itemize}

\subsection{DownloadLookupModule}
\begin{itemize}
    \item \textbf{Description:} Responsible for forwarding requests for lookups via unique download link. Must ask the \ttt{LoadBalancer} for permission before doing so. Also indicates to the \ttt{JobStorageSubsystem} that a document has been read so it can appropriately update its status.
    \item \textbf{Super-component:} \ttt{LookupSubsystem}.
    \item \textbf{Sub-components:} None.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item LookupManagement
    \begin{itemize}
        \item \texttt{void lookupDownloadLink(DownloadLink docLink, UserSession session) throws InvalidOrExpiredDownloadLinkException}
        \begin{itemize}
            \item Effect: Looks up the document corresponding to \ttt{docLink} and returns it directly to the user's software via \ttt{session}.
            \item Exceptions:
            \begin{itemize}
                \item InvalidOrExpiredDownloadLinkException: Either the link is invalid or the link has expired.
            \end{itemize}
        \end{itemize}
    \end{itemize}
\end{itemize}

\subsection{DownloadLinkCatalogue}
\begin{itemize}
    \item \textbf{Description:} Responsible for storing unique download links for 30 days and notifying the Customer Organization whenever a link expires without the Recipient ever having viewed the document.
    \item \textbf{Super-component:} \ttt{LookupSubsystem}.
    \item \textbf{Sub-components:} None.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item DownloadLinkManagement
    \begin{itemize}
        \item \texttt{boolean linkIsValid(DownloadLink link)}
        \begin{itemize}
            \item Effect: Indicates whether the specified link is present in the \ttt{DownloadLinkCatalogue}.
            \item Exceptions: None
        \end{itemize}

        \item \texttt{void storeLink(DownloadLink link)}
		    \begin{itemize}
                \item Effect: Stores the specified \ttt{DownloadLink}.
                \item Exceptions: None
            \end{itemize}
    \end{itemize}
\end{itemize}

\subsection{eDocsAdminDatabase}
\begin{itemize}
    \item \textbf{Description:} Responsible for storing the accounts of all eDocs Administrators.
    \item \textbf{Super-component:} \ttt{AuthenticableUserManager}.
    \item \textbf{Sub-components:} None.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item eDocsAdminInfoManagement
    \begin{itemize}
        \item \texttt{void verifyNotExists(EDocsAdminRegistrationDetails details) throws AlreadyRegisteredException}
        \begin{itemize}
            \item Effect: Verifies that \ttt{details} does not conflict with eDocs Administrators that have already been registered.
            \item Exceptions:
			\begin{itemize}
				\item AlreadyRegisteredException: There already is a registration corresponding to \ttt{details}.
			\end{itemize}
        \end{itemize}

        \item \texttt{void registerAdministrator(EDocsAdminRegistrationDetails details)}
        \begin{itemize}
            \item Effect: Registers a new eDocs administrator with corresponding \ttt{details}.
            \item Exceptions: None
        \end{itemize}

		\item \texttt{void unregisterAdministrator(eDocsAdminID adminID)}
        \begin{itemize}
            \item Effect: Unregisters the eDocs administrator identified by \ttt{adminID}.
            \item Exceptions: None
        \end{itemize}

		\item \texttt{LoginDetails lookupAuthDetails(eDocsAdminID adminID) throws NoSucheDocsAdminException}
		    \begin{itemize}
                \item Effect: Retrieves the \ttt{LoginDetails} of the eDocs Administrator identified by \ttt{adminID}.
                \item Exceptions:
				\begin{itemize}
					\item NoSucheDocsAdminException: There is no eDocs Administrator corresponding to \ttt{adminID}.
				\end{itemize}
            \end{itemize}
    \end{itemize}
\end{itemize}

\subsection{EmailDeliveryChannel}
\begin{itemize}
    \item \textbf{Description:} Responsible for composing e-mails containing either a document to be delivered as an attachment or including a unique link through which to download the document if the Customer Organization has enabled receipt tracking. The resulting e-mail is handed off to the \ttt{CommunicationSubsystem} for submission to an external e-mail provider. Also signals to the \ttt{JobStatusDatabase} that the document's status must be updated, indicating whether receipt tracking has been activated or not.
    \item \textbf{Super-component:} \ttt{DeliverySubsystem}.
    \item \textbf{Sub-components:} None.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item ChannelDeliverySubmission
    \begin{itemize}
        \item \texttt{void deliverDocument(JobID docID, Document document, DeliveryMetaData metaData)}
        \begin{itemize}
            \item Effect: Extracts the e-mail address from \ttt{metaData} as well as whether receipt tracking is requested. Composes an e-mail and hands it off the the \ttt{CommunicationSubsystem}. If receipt tracking is requested, then it asks the \ttt{LookupLinkCodec} for a unique link based on \ttt{docID}. If not, the document is included in the e-mail as an attachment.
            \item Exceptions: None
        \end{itemize}
    \end{itemize}
\end{itemize}

\subsection{ErrorEmailDeliveryHandler}
\begin{itemize}
    \item \textbf{Description:} Responsible for reporting internal system errors/failures to eDocs system administrators. Can inhibit activity of the \ttt{NotificationEmailDeliveryHandler} to ensure that all its notifications leave on time.
    \item \textbf{Super-component:} \ttt{CommunicationSubsystem}.
    \item \textbf{Sub-components:} None.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item ErrorSignaling
    \begin{itemize}
        \item \texttt{void notifyOperatorOfPDSDBReplicaFailure(String name, TimeStamp dateTime)}
        \begin{itemize}
            \item Effect: Notifies the eDocs administrators of the failure of the \ttt{PDSDBReplica} identified by \ttt{name} at the time specified by \ttt{dateTime}
            \item Exceptions: None
        \end{itemize}

        \item \texttt{void notifyOperatorOfPDSDBFailure(TimeStamp dateTime)}
        \begin{itemize}
            \item Effect: Notifies the eDocs administrators of the failure of the (whole) \ttt{PDSDB} at the time specified by \ttt{dateTime}
            \item Exceptions: None
        \end{itemize}

        \item \texttt{void notifyOperatorOfGeneratorFailure(String name, TimeStamp dateTime)}
        \begin{itemize}
            \item Effect: Notifies the eDocs administrators of the failure of the \ttt{Generator} identified by \ttt{name} at the time specified by \ttt{dateTime}
            \item Exceptions: None
        \end{itemize}

		\item \texttt{void notifyOperatorOfDocumentDBReplicaFailure(String name, TimeStamp dateTime)}
        \begin{itemize}
            \item Effect: Notifies the eDocs administrators of the failure of the \ttt{DocumentDBReplica} identified by \ttt{name} at the time specified by \ttt{dateTime}
            \item Exceptions: None
        \end{itemize}
    \end{itemize}

	\item ReceiptConfirmation
    \begin{itemize}
        \item \texttt{void confirmErrorMailReceipt(MailID)}
        \begin{itemize}
            \item Effect: Processes confirmation of receipt of the specified error notification e-mail by an eDocs Administrator (i.e. cancelling the throttling of the \ttt{NotificationEmailDeliveryHandler} when no more error e-mails remain to be sent and receipt thereof confirmed).
            \item Exceptions: None
        \end{itemize}
    \end{itemize}
\end{itemize}

\subsection{ExternalNotificationAcceptor}
\begin{itemize}
    \item \textbf{Description:} Responsible for receiving all inbound communication not highly specific to the domain of discourse (i.e. document generation and delivery).
    \item \textbf{Super-component:} \ttt{CommunicationSubsystem}.
    \item \textbf{Sub-components:} None.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item \texttt{void signalEmailDeliveryFailure(Email email)}
        \begin{itemize}
            \item Effect: Extracts the context out of the given e-mail (e.g. if it concerns document delivery, extracts JobID) and handles it appropriately (e.g. setting the status of the Job to "Delivery failed").
            \item Exceptions: None
        \end{itemize}

		\item \texttt{void confirmDelivery(DocumentName doc)}
        \begin{itemize}
            \item Effect: Extracts the \ttt{JobID} from \ttt{doc} (it is assumed that the \ttt{JobID} is a part of the \ttt{DocumentName}) and sets the status of the document to "Delivery confirmed".
            \item Exceptions: None
        \end{itemize}
\end{itemize}

\subsection{GeneratedDocumentManager}
\begin{itemize}
    \item \textbf{Description:} Responsible for storing documents in the \ttt{DocumentDB} and also the \ttt{PDSDB} (whenever appropriate). If the \ttt{PDSDB} fails, it must store documents in the \ttt{PDSCache} and retrieve them when the \ttt{PDSDB} comes back online.
    \item \textbf{Super-component:} \ttt{DocumentStorageHandler}.
    \item \textbf{Sub-components:} None.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item DocumentStorage
	\begin{itemize}
		\item \texttt{void storeDocument(Document doc, BatchMetaData batchData, RawDataMetaData rawData, boolean toPDS)}
		\begin{itemize}
			\item Effect: Constructs a \ttt{DocumentMetaData} object from \ttt{batchData} and \ttt{rawData} and stores the given document in the \ttt{DocumentDB} (and also the \ttt{PDSDB} if \ttt{toPDS} is true).
			\item Exceptions: None
		\end{itemize}
		
		\item \texttt{Document fetchDocument(JobID docID) throws NoSuchDocumentException}
		\begin{itemize}
			\item Effect: Fetches the Document matching \ttt{docID} from the \ttt{DocumentDB} and returns it together with its meta-data.
			\item Exceptions: 
			\begin{itemize}
				\item NoSuchDocumentException: there is no document matching \ttt{docID}.
			\end{itemize}
		\end{itemize}
	\end{itemize}

	\item PDSContentManagement
	\begin{itemize}
		\item \texttt{void fillPDS(RecipientID recipient) throws NoSuchRecipientException}
		\begin{itemize}
			\item Effect: Fetches all documents addressed to the specified Recipient and stores them in the \ttt{PDSDB}.
			\item Exceptions:
			\begin{itemize}
				\item NoSuchRecipientException: There are no documents stored in the document storage that are addressed to the specified Recipient.
			\end{itemize}
		\end{itemize}
				
		\item \texttt{void purgePDSOfDocumentsOf(RecipientID recipient) throws NoSuchRecipientException}
		\begin{itemize}
			\item Effect: Removes all documents addressed to the specified Recipient from the \ttt{PDSDB}.
			\item Exceptions:
			\begin{itemize}
				\item NoSuchRecipientException: There are no documents stored in the Personal Document Store database that are addressed to the specified Recipient.
			\end{itemize}
		\end{itemize}
	\end{itemize}
\end{itemize}

\subsection{JobContentsDatabase}
\begin{itemize}
    \item \textbf{Description:} Responsible for storing all batch meta-data and all raw data and meta-data of all jobs. If it is indicated that a job has been generated, then it must delete its raw data while leaving its meta-data untouched.
    \item \textbf{Super-component:} \ttt{JobStorageSubsystem}.
    \item \textbf{Sub-components:} None.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item JobContentsManagement
    \begin{itemize}
        \item \texttt{void storeJobs(List<Job> jobs, BatchMetaData batchData)}
        \begin{itemize}
            \item Effect: Stores the given \ttt{Job}s and their corresponding \ttt{batchData}.
            \item Exceptions: None
        \end{itemize}

		\item \texttt{List<Tuple<JobID, RawDataEntry>> getRawData(List<JobID> jobIDs)}
        \begin{itemize}
            \item Effect: Retrieves the \ttt{RawDataEntry}s that correspond to the given list of \ttt{JobID}s.
            \item Exceptions: None
        \end{itemize}

        \item \texttt{BatchMetaData getBatchMetaData(BatchID batchID)}
		\begin{itemize}
            \item Effect: Retrieves the \ttt{BatchMetaData} corresponding to the given \ttt{batchID}
            \item Exceptions: None
        \end{itemize}

		\item \texttt{int getNumberOfDocumentsOfRecurringBatch(RecurringBatchID batchID, TimeStamp time)}
		\begin{itemize}
            \item Effect: Retrieves the number of documents submitted for the recurring batch identified by \ttt{batchID} in the month specified by \ttt{time}.
            \item Exceptions: None
        \end{itemize}

		\item \texttt{BatchID getBatchIDofRecurringBatch(RecurringBatchID recurringBatchID, TimeStamp time) throws NoSuchBatchException}
		\begin{itemize}
            \item Effect: Retrieves the \ttt{BatchID} of the recurring batch identified by \ttt{recurringBatchID} that was submitted in the month specified by \ttt{time}.
            \item Exceptions:
			\begin{itemize}
				\item NoSuchBatchException: There was no submission of the recurring batch identified by \ttt{recurringBatchID} in the month specified by \ttt{time}.
			\end{itemize}
        \end{itemize}

		\item \texttt{void removeRawDataOf(JobID jobID)}
		\begin{itemize}
            \item Effect: Removes the raw data of the \ttt{Job} identified by \ttt{jobID}.
            \item Exceptions: None
        \end{itemize}
    \end{itemize}
\end{itemize}

\subsection{JobInfoManager}
\begin{itemize}
    \item \textbf{Description:} Responsible for providing the raw data of jobs and updating job statuses.
    \item \textbf{Super-component:} \ttt{JobStorageSubsystem}.
    \item \textbf{Sub-components:} None.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item JobInfoManagement
    \begin{itemize}
        \item \texttt{List<Tuple<JobID, RawDataEntry>> getRawData(List<JobID> jobIDs)}
        \begin{itemize}
            \item Effect: Retrieves the \ttt{RawDataEntry}s that correspond to the given list of \ttt{JobID}s.
            \item Exceptions: None
        \end{itemize}

        \item \texttt{BatchMetaData getBatchMetaData(BatchID batchID)}
		\begin{itemize}
            \item Effect: Retrieves the \ttt{BatchMetaData} corresponding to the given \ttt{batchID}
            \item Exceptions: None
        \end{itemize}

		\item \texttt{int getNumberOfDocumentsOfRecurringBatch(RecurringBatchID batchID, TimeStamp time)}
		\begin{itemize}
            \item Effect: Retrieves the number of documents submitted for the recurring batch identified by \ttt{batchID} in the month specified by \ttt{time}.
            \item Exceptions: None
        \end{itemize}

		\item \texttt{BatchID getBatchIDofRecurringBatch(RecurringBatchID recurringBatchID, TimeStamp time) throws NoSuchBatchException}
		\begin{itemize}
            \item Effect: Retrieves the \ttt{BatchID} of the recurring batch identified by \ttt{recurringBatchID} that was submitted in the month specified by \ttt{time}.
            \item Exceptions:
			\begin{itemize}
				\item NoSuchBatchException: There was no submission of the recurring batch identified by \ttt{recurringBatchID} in the month specified by \ttt{time}.
			\end{itemize}
        \end{itemize}

		\item \texttt{void updateStatusSent(JobID jobID, boolean receiptTracking)}
		\begin{itemize}
            \item Effect: Either sets the status of the document corresponding to \ttt{jobID} to "Sent" or "Pending delivery confirmation" depending on \ttt{receiptTracking}.
            \item Exceptions: None
        \end{itemize}

		\item \texttt{void updateStatusDeliveryFailed(JobID jobID}
		\begin{itemize}
            \item Effect: Sets the status of the document corresponding to \ttt{jobID} to "Delivery failed".
            \item Exceptions: None
        \end{itemize}

		\item \texttt{void updateStatusDownloadExpired(JobID jobID}
		\begin{itemize}
            \item Effect: Sets the status of the document corresponding to \ttt{jobID} to "Download link expired".
            \item Exceptions: None
        \end{itemize}

		\item \texttt{void updateStatusGenerated(JobID jobID)}
		\begin{itemize}
            \item Effect: Sets the status of the document corresponding to \ttt{jobID} to "Generated". Also triggers removal of the \ttt{Job}'s raw data (but not its meta-data).
            \item Exceptions: None
        \end{itemize}

		\item \texttt{void updateStatusGenerationFailed(JobID jobID)}
		\begin{itemize}
            \item Effect: Sets the status of the document corresponding to \ttt{jobID} to "Generation failed".
            \item Exceptions: None
        \end{itemize}

		\item \texttt{void updateStatusReceived(JobID jobID) throws ReceiptTrackingNotEnabledException}
		\begin{itemize}
            \item Effect: Sets the status of the document corresponding to \ttt{jobID} to "Delivery confirmed".
            \item Exceptions:
			\begin{itemize}
				\item ReceiptTrackingNotEnabledException: The status of the \ttt{Job} was not "Pending delivery confirmation".
			\end{itemize}
        \end{itemize}
    \end{itemize}
\end{itemize}

\subsection{JobGenerator}
\begin{itemize}
	\item \textbf{Description:} Accepts verified batches of raw data and generates jobs from them
	\item \textbf{Super-component:} \ttt{SubmissionSubsystem}.
	\item \textbf{Sub-components:} None.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
	\item JobDataSubmission
	\begin{itemize}
		\item \texttt{void generateJobs(RawDataBatch dataBatch)}
		\begin{itemize}
			\item Effect: Generates \ttt{RawDataEntry} and \ttt{JobID} objects from each individual entry in \ttt{dataBatch}. Additionally, generates \ttt{BatchMetaData} and \ttt{BatchID} objects and associates each \ttt{RawDataEntry} with that \ttt{BatchID} by generating a \ttt{Job} object from the \ttt{JobID}, \ttt{RawDataEntry} and \ttt{BatchID}. After this is completed, submits all generated \ttt{Job} objects and the \ttt{BatchMetaData} to the \ttt{JobStorageSubsystem}
			\item Exceptions: None
		\end{itemize}
	\end{itemize}
\end{itemize}

\subsection{JobStatusDatabase}
\begin{itemize}
    \item \textbf{Description:} Responsible for storing the status of all jobs.
    \item \textbf{Super-component:} \ttt{JobStorageSubsystem}.
    \item \textbf{Sub-components:} None.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item JobStatusManagement
    \begin{itemize}
		\item \texttt{void addJobStatus(JobID jobID)}
		\begin{itemize}
            \item Effect: Adds an entry for the given \ttt{jobID} and sets its status to "Initiated".
            \item Exceptions: None
        \end{itemize}

		\item \texttt{void addJobStatuses(List<JobID> jobIDs)}
		\begin{itemize}
            \item Effect: Adds entries for the given \ttt{jobIDs} and sets their statuses to "Initiated".
            \item Exceptions: None
        \end{itemize}

		\item \texttt{void updateStatusSent(JobID jobID, boolean receiptTracking)}
		\begin{itemize}
            \item Effect: Either sets the status of the document corresponding to \ttt{jobID} to "Sent" or "Pending delivery confirmation" depending on \ttt{receiptTracking}.
            \item Exceptions: None
        \end{itemize}

		\item \texttt{void updateStatusDeliveryFailed(JobID jobID}
		\begin{itemize}
            \item Effect: Sets the status of the document corresponding to \ttt{jobID} to "Delivery failed".
            \item Exceptions: None
        \end{itemize}

		\item \texttt{void updateStatusDownloadExpired(JobID jobID}
		\begin{itemize}
            \item Effect: Sets the status of the document corresponding to \ttt{jobID} to "Download link expired".
            \item Exceptions: None
        \end{itemize}

		\item \texttt{void updateStatusGenerated(JobID jobID)}
		\begin{itemize}
            \item Effect: Sets the status of the document corresponding to \ttt{jobID} to "Generated". Also triggers removal of the \ttt{Job}'s raw data (but not its meta-data).
            \item Exceptions: None
        \end{itemize}

		\item \texttt{void updateStatusGenerationFailed(JobID jobID)}
		\begin{itemize}
            \item Effect: Sets the status of the document corresponding to \ttt{jobID} to "Generation failed".
            \item Exceptions: None
        \end{itemize}

		\item \texttt{void updateStatusReceived(JobID jobID) throws ReceiptTrackingNotEnabledException}
		\begin{itemize}
            \item Effect: Sets the status of the document corresponding to \ttt{jobID} to "Delivery confirmed".
            \item Exceptions:
			\begin{itemize}
				\item ReceiptTrackingNotEnabledException: The status of the \ttt{Job} was not "Pending delivery confirmation".
			\end{itemize}
        \end{itemize}
    \end{itemize}

	\item JobLookup
    \begin{itemize}
        \item \texttt{void getAllJobStatuses(UserSession session)}
        \begin{itemize}
            \item Effect: Extracts the \ttt{CustomerOrganizationID} from \ttt{session}, retrieves the statuses of all its \ttt{Job}s and sends them directly to the user's software via \ttt{session}.
            \item Exceptions: None
        \end{itemize}
    \end{itemize}
\end{itemize}

\subsection{JobStorageSubsystem}
\begin{itemize}
    \item \textbf{Description:} Responsibilities for storing jobs. Must allow updating a job's status. Initially stores the raw data corresponding to a job as well as its meta-data and the meta-data of its batch. If a document has been generated, the raw data is deleted but all meta-data preserved.
    \item \textbf{Super-component:} None.
    \item \textbf{Sub-components:} \ttt{JobContentsDatabase}, \ttt{JobInfoManager}, \ttt{JobStatusDatabase}, \ttt{JobSubmitter}.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item JobInfoManagement
    \begin{itemize}
        \item \texttt{List<Tuple<JobID, RawDataEntry>> getRawData(List<JobID> jobIDs)}
        \begin{itemize}
            \item Effect: Retrieves the \ttt{RawDataEntry}s that correspond to the given list of \ttt{JobID}s.
            \item Exceptions: None
        \end{itemize}

        \item \texttt{BatchMetaData getBatchMetaData(BatchID batchID)}
		\begin{itemize}
            \item Effect: Retrieves the \ttt{BatchMetaData} corresponding to the given \ttt{batchID}
            \item Exceptions: None
        \end{itemize}

		\item \texttt{int getNumberOfDocumentsOfRecurringBatch(RecurringBatchID batchID, TimeStamp time)}
		\begin{itemize}
            \item Effect: Retrieves the number of documents submitted for the recurring batch identified by \ttt{batchID} in the month specified by \ttt{time}.
            \item Exceptions: None
        \end{itemize}

		\item \texttt{BatchID getBatchIDofRecurringBatch(RecurringBatchID recurringBatchID, TimeStamp time) throws NoSuchBatchException}
		\begin{itemize}
            \item Effect: Retrieves the \ttt{BatchID} of the recurring batch identified by \ttt{recurringBatchID} that was submitted in the month specified by \ttt{time}.
            \item Exceptions:
			\begin{itemize}
				\item NoSuchBatchException: There was no submission of the recurring batch identified by \ttt{recurringBatchID} in the month specified by \ttt{time}.
			\end{itemize}
        \end{itemize}

		\item \texttt{void updateStatusSent(JobID jobID, boolean receiptTracking)}
		\begin{itemize}
            \item Effect: Either sets the status of the document corresponding to \ttt{jobID} to "Sent" or "Pending delivery confirmation" depending on \ttt{receiptTracking}.
            \item Exceptions: None
        \end{itemize}

		\item \texttt{void updateStatusDeliveryFailed(JobID jobID}
		\begin{itemize}
            \item Effect: Sets the status of the document corresponding to \ttt{jobID} to "Delivery failed".
            \item Exceptions: None
        \end{itemize}

		\item \texttt{void updateStatusDownloadExpired(JobID jobID}
		\begin{itemize}
            \item Effect: Sets the status of the document corresponding to \ttt{jobID} to "Download link expired".
            \item Exceptions: None
        \end{itemize}

		\item \texttt{void updateStatusGenerated(JobID jobID)}
		\begin{itemize}
            \item Effect: Sets the status of the document corresponding to \ttt{jobID} to "Generated". Also triggers removal of the \ttt{Job}'s raw data (but not its meta-data).
            \item Exceptions: None
        \end{itemize}

		\item \texttt{void updateStatusGenerationFailed(JobID jobID)}
		\begin{itemize}
            \item Effect: Sets the status of the document corresponding to \ttt{jobID} to "Generation failed".
            \item Exceptions: None
        \end{itemize}

		\item \texttt{void updateStatusReceived(JobID jobID) throws ReceiptTrackingNotEnabledException}
		\begin{itemize}
            \item Effect: Sets the status of the document corresponding to \ttt{jobID} to "Delivery confirmed".
            \item Exceptions:
			\begin{itemize}
				\item ReceiptTrackingNotEnabledException: The status of the \ttt{Job} was not "Pending delivery confirmation".
			\end{itemize}
        \end{itemize}
    \end{itemize}

    \item JobLookup
    \begin{itemize}
        \item \texttt{void getAllJobStatuses(UserSession session)}
        \begin{itemize}
            \item Effect: Extracts the \ttt{CustomerOrganizationID} from \ttt{session}, retrieves the statuses of all its \ttt{Job}s and sends them directly to the user's software via \ttt{session}.
            \item Exceptions: None
        \end{itemize}
    \end{itemize}

	\item JobSubmission
    \begin{itemize}
        \item \texttt{void submitJobs(List<Job> jobs, BatchMetaData batchData)}
        \begin{itemize}
            \item Effect: Stores the given \ttt{Job}s and their corresponding \ttt{batchData}. Sets the status of the \ttt{Job}s to "Initiated".
            \item Exceptions: None
        \end{itemize}
    \end{itemize}
\end{itemize}

\subsection{JobSubmitter}
\begin{itemize}
    \item \textbf{Description:} Responsible for storing the raw data and meta-data of new jobs in the \ttt{JobContentsDatabase} and adding an entry in the \ttt{JobStatusDatabase}.
    \item \textbf{Super-component:} \ttt{JobStorageSubsystem}.
    \item \textbf{Sub-components:} None.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item JobSubmission
    \begin{itemize}
        \item \texttt{void submitJobs(List<Job> jobs, BatchMetaData batchData)}
        \begin{itemize}
            \item Effect: Stores the given \ttt{Job}s and their corresponding \ttt{batchData}. Sets the status of the \ttt{Job}s to "Initiated".
            \item Exceptions: None
        \end{itemize}
    \end{itemize}
\end{itemize}

\subsection{LoadBalancer}
\begin{itemize}
    \item \textbf{Description:} Responsible for load balancing of lookup requests. Receives information about document database processing capabilities in order to achieve this.
    \item \textbf{Super-component:} \ttt{LookupSubsystem}.
    \item \textbf{Sub-components:} None.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item LoadInfoManagement
    \begin{itemize}
        \item \texttt{void notifyOfSystemCapabilities(CapabilityReport report)}
        \begin{itemize}
            \item Effect: Notifies of the current processing power available to the document databases upon which decisions about load balancing may be made.
            \item Exceptions: None.
        \end{itemize}
    \end{itemize}

    \item LoadManagement
    \begin{itemize}
        \item \texttt{boolean getPDSLookupPermission()}
        \begin{itemize}
            \item Effect: True if the \ttt{LoadBalancer} deems the document database to be able to handle this lookup in the \ttt{PDSDB}.
            \item Exceptions: None
        \end{itemize}

		\item \texttt{boolean getPDSQueryPermission()}
        \begin{itemize}
            \item Effect: True if the \ttt{LoadBalancer} deems the document database to be able to handle this query for the \ttt{PDSDB}.
            \item Exceptions: None
        \end{itemize}

		\item \texttt{boolean getDownloadLookupPermission()}
        \begin{itemize}
            \item Effect: True if the \ttt{LoadBalancer} deems the document database to be able to handle this lookup in the \ttt{DocumentDB}.
            \item Exceptions: None
        \end{itemize}
    \end{itemize}
\end{itemize}

\subsection{LookupLinkCodec}
\begin{itemize}
    \item \textbf{Description:} Responsible for encoding links (and passing them to the \ttt{DownloadLinkCatalogue}, if it is a unique download link) and decoding links.
    \item \textbf{Super-component:} \ttt{LookupSubsystem}.
    \item \textbf{Sub-components:} None.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item LookupLinkManagement
    \begin{itemize}
        \item \texttt{DownloadLink generateDownloadLink(JobID docID)}
        \begin{itemize}
            \item Effect: Generates a download link that encodes \ttt{docID} and returns it, also storing it for 30 days.
            \item Exceptions: None
        \end{itemize}

        \item \texttt{JobID decodeDownloadLink(DownloadLink link)}
		    \begin{itemize}
                \item Effect: Decodes the given link and returns the decoded \ttt{JobID}.
                \item Exceptions: None
            \end{itemize}

		\item \texttt{Tuple<RecipientID, JobID> decodeLink(PDSLookupLink link)}
		    \begin{itemize}
                \item Effect: Decodes the given link and returns the decoded \ttt{JobID} and \ttt{RecipientID}.
                \item Exceptions: None
            \end{itemize}
    \end{itemize}
\end{itemize}

\subsection{LookupSubsystem}
\begin{itemize}
    \item \textbf{Description:} Responsible for forwarding requests for documents to the \ttt{DocumentStorageSubsystem}. Must handle load balancing of lookups and management of download links.
    \item \textbf{Super-component:} None.
    \item \textbf{Sub-components:} \ttt{DownloadLookupModule} \ttt{DownloadLinkCatalogue}, \ttt{LoadBalancer}, \ttt{LookupLinkCodec}, \ttt{PDSLookupModule}.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item LoadInfoManagement
    \begin{itemize}
        \item \texttt{void notifyOfSystemCapabilities(CapabilityReport report)}
        \begin{itemize}
            \item Effect: Notifies of the current processing power available to the document databases upon which decisions about load balancing may be made.
            \item Exceptions: None.
        \end{itemize}
    \end{itemize}

    \item LookupManagement
    \begin{itemize}
        \item \texttt{void lookupDownloadLink(DownloadLink docLink, UserSession session) throws InvalidOrExpiredDownloadLinkException}
        \begin{itemize}
            \item Effect: Looks up the document corresponding to \ttt{docLink} and returns it directly to the user's software via \ttt{session}.
            \item Exceptions:
            \begin{itemize}
                \item InvalidOrExpiredDownloadLinkException: Either the link is invalid or the link has expired.
            \end{itemize}
        \end{itemize}
    \end{itemize}

	\item LookupLinkManagement
    \begin{itemize}
        \item \texttt{DownloadLink generateDownloadLink(JobID docID)}
        \begin{itemize}
            \item Effect: Generates a download link that encodes \ttt{docID} and returns it, also storing it for 30 days.
            \item Exceptions: None
        \end{itemize}

        \item \texttt{JobID decodeDownloadLink(DownloadLink link)}
		    \begin{itemize}
                \item Effect: Decodes the given link and returns the decoded \ttt{JobID}.
                \item Exceptions: None
            \end{itemize}

		\item \texttt{Tuple<RecipientID, JobID> decodeLink(PDSLookupLink link)}
		    \begin{itemize}
                \item Effect: Decodes the given link and returns the decoded \ttt{JobID} and \ttt{RecipientID}.
                \item Exceptions: None
            \end{itemize}
    \end{itemize}

	\item PDSLookupManagement
    \begin{itemize}
        \item \texttt{void lookupDoc(JobID docID, UserSession session) throws NoSuchDocumentException}
        \begin{itemize}
            \item Effect: Looks up the document corresponding to \ttt{docID} in the \ttt{PDSDB} and returns it directly to the user's software via \ttt{session}.
            \item Exceptions: 
			\begin{itemize}
				\item NoSuchDocumentException: There is no document corresponding to \ttt{docID} in the \ttt{PDSDB}. This exception is propagated directly to the user via \ttt{session}.
			\end{itemize}
        \end{itemize}

        \item \texttt{void lookupDocWithLink(PDSLookupLink link, UserSession session) throws UnauthorizedLookupException, NoSuchDocumentException}
		    \begin{itemize}
                \item Effect: Decodes the given link to a \ttt{JobID} and \ttt{RecipientID} and returns the corresponding \ttt{Document} directly to the user's software via \ttt{session}.
                \item Exceptions: 
				\begin{itemize}
					\item NoSuchDocumentException: There is no document corresponding to the \ttt{JobID} encoded in \ttt{link} in the \ttt{PDSDB}. This exception is propagated directly to the user via \ttt{session}.
					\item UnauthorizedLookupException: The \ttt{RecipientID} encoded in \ttt{link} does not correspond with the \ttt{RecipientID} contained the \ttt{session}.
				\end{itemize}
            \end{itemize}

		\item \texttt{void submitPDSQuery(DocumentQueryParameter query, UserSession session)}
        \begin{itemize}
            \item Effect: Looks up all Documents matching \ttt{query} and them directly to the user's software via \ttt{session}.
            \item Exceptions: None.
        \end{itemize}
    \end{itemize}
\end{itemize}

\subsection{NotificationEmailDeliveryHandler}
\begin{itemize}
    \item \textbf{Description:} Responsible for submitting pre-made e-mails to the external e-mail provider and generating an e-mail with contents consistent with information received from other components.
    \item \textbf{Super-component:} \ttt{CommunicationSubsystem}.
    \item \textbf{Sub-components:} None.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item MessageManagement
    \begin{itemize}
        \item \texttt{void notifyOperatorOfZoomitFailure(TimeStamp dateTime)}
        \begin{itemize}
            \item Effect: Notifies the eDocs Administrators of the failure of the Zoomit service at the time specified by \ttt{dateTime}.
            \item Exceptions: None
        \end{itemize}
		
		\item \texttt{void notifyCustomerAdministratorOfZoomitDeliveryFailure(ZoomitDeliveryErrorReport error)}
        \begin{itemize}
            \item Effect: Looks up the Customer Organization that submitted the \ttt{Job} identified by \ttt{jobID} contained in \ttt{error}, identifies the Customer Administrator responsible for the document type of the \ttt{Job} and sends an e-mail containing \ttt{error}. Also updates the status to "Delivery failed"
            \item Exceptions: None
        \end{itemize}

        \item \texttt{void generationError(JobId jobID, GenerationErrorReport error)}
		    \begin{itemize}
                \item Effect: Looks up the Customer Organization that submitted the \ttt{Job} identified by \ttt{jobID}, identifies the Customer Administrator responsible for the document type of the \ttt{Job} and sends an e-mail containing \ttt{error}. Also updates the status to "Generation failed"
                \item Exceptions: None
            \end{itemize}

		\item \texttt{void notifyDownloadLinkExpiration(JobId jobID)}
		    \begin{itemize}
                \item Effect: Looks up the Customer Organization that submitted the \ttt{Job} identified by \ttt{jobID}, identifies the Customer Administrator responsible for the document type of the \ttt{Job} and sends an e-mail indicating that the download link corresponding to the document expired. Also updates the status to "Document link expired".
                \item Exceptions: None
            \end{itemize}

		\item \texttt{void submitEmail(Email email)}
        \begin{itemize}
            \item Effect: Submits the given e-mail to the external e-mail provider.
            \item Exceptions: None
        \end{itemize}
    \end{itemize}

	\item EmailThrottling
    \begin{itemize}
        \item \texttt{void throttleEmailSubmission(int numMailsPerSecond)}
        \begin{itemize}
            \item Effect: Throttles submission of e-mails to external e-mail providers such that a maximum of \ttt{numMailsPerSecond} are sent per second in order to ensure that higher-priority communication leaves on time. 
            \item Exceptions: None
        \end{itemize}

		\item \texttt{void cancelEmailThrottling()}
        \begin{itemize}
            \item Effect: The \ttt{NotificationEmailDeliveryHandler} will no longer throttle submission of e-mails to external e-mail providers. 
            \item Exceptions: None
        \end{itemize}
    \end{itemize}
\end{itemize}

\subsection{PDSCache}
\begin{itemize}
    \item \textbf{Description:} Responsible for caching documents meant to be stored in the \ttt{PDSDB} whenever the latter fails. Must be able to store at least three hours' worth of documents.
    \item \textbf{Super-component:} \ttt{DocumentStorageHandler}.
    \item \textbf{Sub-components:} None.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item PDSCacheManagement
    \begin{itemize}
        \item \texttt{void cacheDocument(JobID)}
        \begin{itemize}
            \item Effect: Stores the specified \ttt{JobID} in the cache.
            \item Exceptions: None
        \end{itemize}

        \item \texttt{List<JobID> flushCache()}
		    \begin{itemize}
                \item Effect: Retrieves all \ttt{JobID}s stored in the cache and removes them from the cache.
                \item Exceptions: None
            \end{itemize}
    \end{itemize}
\end{itemize}

\subsection{PDSDB}
\begin{itemize}
    \item \textbf{Description:} Responsible for storing all Personal Document Store documents.
    \item \textbf{Super-component:} \ttt{DocumentStorageSubsystem}.
    \item \textbf{Sub-components:} \ttt{PDSLongTermDocumentManager}, \ttt{PDSReplicationManager}, \ttt{PDSDBReplica}.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
	\item PDSDocumentManagement
	\begin{itemize}
		\item \texttt{void storeDocument(Document doc, DocumentMetaData metaData)}
		\begin{itemize}
			\item Effect: Stores the specified document and its meta-data in the database.
			\item Exceptions: None
		\end{itemize}

		\item \texttt{void storeDocuments(List<Tuple<Document doc, DocumentMetaData metaData>> docs)}
		\begin{itemize}
			\item Effect: Stores all Documents in \ttt{docs} in the database.
			\item Exceptions: None
		\end{itemize}

		\item \texttt{void purgePDSOfDocumentsOf(RecipientID recipient) throws NoSuchRecipientException}
		\begin{itemize}
			\item Effect: Removes all documents addressed to the specified Recipient from the Personal Document Store database.
			\item Exceptions:
			\begin{itemize}
				\item NoSuchRecipientException: There are no documents stored in the Personal Document Store database that are addressed to the specified Recipient.
			\end{itemize}
		\end{itemize}
	\end{itemize}

    \item PDSLookup
	\begin{itemize}
		\item \texttt{void fetchDocument(JobID docID, UserSession session) throws NoSuchDocumentException}
		\begin{itemize}
			\item Effect: Fetches the document specified by \ttt{docID} and returns it directly to the user's software via \ttt{session}.
			\item Exceptions:
			\begin{itemize}
				\item NoSuchDocumentException: The document specified by \ttt{docID} does not exist. This exception is propagated directly to the user's software via \ttt{session}.
			\end{itemize}
		\end{itemize}
				
		\item \texttt{void performLookupQuery(DocumentQueryParameter query, UserSession session)}
		\begin{itemize}
			\item Effect: Computes which of the Recipient's documents matches \ttt{query} and returns the resulting list of \ttt{DocumentMetaData} objects directly to the user's software via \ttt{session}. Note that this list may be empty if none of the Recipient's documents match.
			\item Exceptions: None.
		\end{itemize}
	\end{itemize}

	\item Ping
	\begin{itemize}
		\item \texttt{Echo ping()}
		\begin{itemize}
			\item Effect: Returns an Echo to reassure the caller that the callee is still available.
			\item Exceptions: None.
		\end{itemize}
	\end{itemize}
\end{itemize}

\subsection{PDSDBReplica}
\begin{itemize}
    \item \textbf{Description:} Stores all documents that belong in the Personal Document Store. Also must respond to pings when directed to by the \ttt{PDSReplicaManager}
    \item \textbf{Super-component:} \ttt{PDSDB}.
    \item \textbf{Sub-components:} None.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item ExtendedDocumentReplicaMgmt
	\begin{itemize}
		\item \texttt{void storeDocument(Document doc, DocumentMetaData metaData)}
		\begin{itemize}
			\item Effect: Stores the specified document and its meta-data in the database.
			\item Exceptions: None
		\end{itemize}

		\item \texttt{void storeDocuments(List<Tuple<Document doc, DocumentMetaData metaData>> docs)}
		\begin{itemize}
			\item Effect: Stores all Documents in \ttt{docs} in the database.
			\item Exceptions: None
		\end{itemize}

		\item \texttt{Tuple<Document, DocumentMetaData> fetchAndRemoveOldDocuments()}
		\begin{itemize}
			\item Effect: Fetches all documents that both have been stored for at least 30 days and have been received and removes them.
			\item Exceptions: None
		\end{itemize}

		\item \texttt{Document fetchDocument(JobID docID) throws NoSuchDocumentException}
		\begin{itemize}
			\item Effect: Fetches the document specified by \ttt{docID} and returns it. Also flags the concerned Document as having been read so that it can be transferred to the storage for old documents once the Document is at least 30 days old.
			\item Exceptions:
			\begin{itemize}
				\item NoSuchDocumentException: The document specified by \ttt{docID} does not exist.
			\end{itemize}
		\end{itemize}
				
		\item \texttt{List<DocumentMetaData> performLookupQuery(DocumentQueryParameter query, UserSession session)}
		\begin{itemize}
			\item Effect: Computes which of the Recipient's documents matches \ttt{query} and returns the resulting list of \ttt{DocumentMetaData} objects. Note that this list may be empty if none of the Recipient's documents match.
			\item Exceptions: None.
		\end{itemize}

		\item \texttt{void purgePDSOfDocumentsOf(RecipientID recipient) throws NoSuchRecipientException}
		\begin{itemize}
			\item Effect: Removes all documents addressed to the specified Recipient from the Personal Document Store database.
			\item Exceptions:
			\begin{itemize}
				\item NoSuchRecipientException: There are no documents stored in the Personal Document Store database that are addressed to the specified Recipient.
			\end{itemize}
		\end{itemize}

		\item \texttt{List<Document, DocumentMetaData> getDocumentsSince(TimeStamp time)}
		\begin{itemize}
			\item Effect: Retrieves all documents that have been stored since the given \ttt{TimeStamp}.
			\item Exceptions: None.
		\end{itemize}
	\end{itemize}

	\item Ping
	\begin{itemize}
		\item \texttt{Echo ping()}
		\begin{itemize}
			\item Effect: Returns an Echo to reassure the caller that the callee is still available.
			\item Exceptions: None.
		\end{itemize}
	\end{itemize}
\end{itemize}

\subsection{PDSDeliveryChannel}
\begin{itemize}
    \item \textbf{Description:} Responsible for delivering documents to Registered Recipients by asking the \ttt{LookupLinkCodec} for a \ttt{PDSLookupLink} and including it in an e-mail, which is handed off to the \ttt{CommunicationSubsystem}. Also signals to the \ttt{JobStatusDatabase} that the document's status must be updated, indicating whether receipt tracking has been activated or not.
    \item \textbf{Super-component:} \ttt{DeliverySubsystem}.
    \item \textbf{Sub-components:} None.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item ChannelDeliverySubmission
    \begin{itemize}
        \item \texttt{void deliverDocument(JobID docID, Document document, DeliveryMetaData metaData)}
        \begin{itemize}
            \item Effect: Extracts the e-mail address from \ttt{metaData}. Composes an e-mail including a \ttt{PDSLookupLink} encoded by the \ttt{LookupLinkCodec} and hands it off the the \ttt{CommunicationSubsystem}.
            \item Exceptions: None
        \end{itemize}
    \end{itemize}
\end{itemize}

\subsection{PDSLongTermDocumentHandler}
\begin{itemize}
    \item \textbf{Description:} The first component to receive requests to store and look up documents in the Personal Document Store. Transfers documents that have been both read and are older than 30 days from the new document storage to the old document storage once a day.
    \item \textbf{Super-component:} \ttt{PDSDB}.
    \item \textbf{Sub-components:} None.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item PDSLookup
	\begin{itemize}
		\item \texttt{void fetchDocument(JobID docID, UserSession session) throws NoSuchDocumentException}
		\begin{itemize}
			\item Effect: Fetches the document specified by \ttt{docID} and returns it directly to the user's software via \ttt{session}.
			\item Exceptions:
			\begin{itemize}
				\item NoSuchDocumentException: The document specified by \ttt{docID} does not exist. This exception is propagated directly to the user's software via \ttt{session}.
			\end{itemize}
		\end{itemize}
				
		\item \texttt{void performLookupQuery(DocumentQueryParameter query, UserSession session)}
		\begin{itemize}
			\item Effect: Computes which of the Recipient's documents matches \ttt{query} and returns the resulting list of \ttt{DocumentMetaData} objects directly to the user's software via \ttt{session}. Note that this list may be empty if none of the Recipient's documents match.
			\item Exceptions: None.
		\end{itemize}
	\end{itemize}

    \item PDSDocumentManagement
	\begin{itemize}
		\item \texttt{void storeDocument(Document doc, DocumentMetaData metaData)}
		\begin{itemize}
			\item Effect: Stores the specified document and its meta-data in the cluster for new documents.
			\item Exceptions: None
		\end{itemize}

		\item \texttt{void storeDocuments(List<Tuple<Document doc, DocumentMetaData metaData>> docs)}
		\begin{itemize}
			\item Effect: Stores all Documents in \ttt{docs} in the database.
			\item Exceptions: None
		\end{itemize}

		\item \texttt{void purgePDSOfDocumentsOf(RecipientID recipient) throws NoSuchRecipientException}
		\begin{itemize}
			\item Effect: Removes all documents addressed to the specified Recipient from the Personal Document Store database.
			\item Exceptions:
			\begin{itemize}
				\item NoSuchRecipientException: There are no documents stored in the Personal Document Store database that are addressed to the specified Recipient.
			\end{itemize}
		\end{itemize}
	\end{itemize}

	\item Ping
	\begin{itemize}
		\item \texttt{Echo ping()}
		\begin{itemize}
			\item Effect: Returns an Echo to reassure the caller that the callee is still available.
			\item Exceptions: None.
		\end{itemize}
	\end{itemize}
\end{itemize}

\subsection{PDSLookupModule}
\begin{itemize}
    \item \textbf{Description:} Responsible for forwarding lookup and query requests to the \ttt{PDSDB}. If the \ttt{PDSDB} is down, it must ping it and indicate to users the Personal Document Store is unavailable until its pings are answered. Must ask permission from the \ttt{LoadBalancer} before forwarding any requests. Also indicates to the \ttt{JobStorageSubsystem} that a document has been read so it can appropriately update its status.
    \item \textbf{Super-component:} \ttt{LookupSubsystem}.
    \item \textbf{Sub-components:} None.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item PDSLookupManagement
    \begin{itemize}
        \item \texttt{void lookupDoc(JobID docID, UserSession session) throws NoSuchDocumentException}
        \begin{itemize}
            \item Effect: Looks up the document corresponding to \ttt{docID} in the \ttt{PDSDB} and returns it directly to the user's software via \ttt{session}.
            \item Exceptions: 
			\begin{itemize}
				\item NoSuchDocumentException: There is no document corresponding to \ttt{docID} in the \ttt{PDSDB}. This exception is propagated directly to the user via \ttt{session}.
			\end{itemize}
        \end{itemize}

        \item \texttt{void lookupDocWithLink(PDSLookupLink link, UserSession session) throws UnauthorizedLookupException, NoSuchDocumentException}
		    \begin{itemize}
                \item Effect: Decodes the given link to a \ttt{JobID} and \ttt{RecipientID} and returns the corresponding \ttt{Document} directly to the user's software via \ttt{session}.
                \item Exceptions: 
				\begin{itemize}
					\item NoSuchDocumentException: There is no document corresponding to the \ttt{JobID} encoded in \ttt{link} in the \ttt{PDSDB}. This exception is propagated directly to the user via \ttt{session}.
					\item UnauthorizedLookupException: The \ttt{RecipientID} encoded in \ttt{link} does not correspond with the \ttt{RecipientID} contained the \ttt{session}.
				\end{itemize}
            \end{itemize}

		\item \texttt{void submitPDSQuery(DocumentQueryParameter query, UserSession session)}
        \begin{itemize}
            \item Effect: Looks up all Documents matching \ttt{query} and them directly to the user's software via \ttt{session}.
            \item Exceptions: None.
        \end{itemize}
    \end{itemize}
\end{itemize}

\subsection{PDSReplicationManager}
\begin{itemize}
    \item \textbf{Description:} Manages its \ttt{PDSDBReplica}s, sending an error notification in case any of them fails.
    \item \textbf{Super-component:} \ttt{PDSDB}.
    \item \textbf{Sub-components:} None.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item ExtendedDocumentMgmt
	\begin{itemize}
		\item \texttt{void storeDocument(Document doc, DocumentMetaData metaData)}
		\begin{itemize}
			\item Effect: Stores the specified document and its meta-data in the database.
			\item Exceptions: None
		\end{itemize}

		\item \texttt{void storeDocuments(List<Tuple<Document doc, DocumentMetaData metaData>> docs)}
		\begin{itemize}
			\item Effect: Stores all Documents in \ttt{docs} in the database.
			\item Exceptions: None
		\end{itemize}

		\item \texttt{Tuple<Document, DocumentMetaData> fetchAndRemoveOldDocuments()}
		\begin{itemize}
			\item Effect: Fetches all documents that both have been stored for at least 30 days and have been received and removes them.
			\item Exceptions: None
		\end{itemize}

		\item \texttt{Document fetchDocument(JobID docID) throws NoSuchDocumentException}
		\begin{itemize}
			\item Effect: Fetches the document specified by \ttt{docID} and returns it. Also flags the concerned Document as having been read so that it can be transferred to the storage for old documents once the Document is at least 30 days old.
			\item Exceptions:
			\begin{itemize}
				\item NoSuchDocumentException: The document specified by \ttt{docID} does not exist.
			\end{itemize}
		\end{itemize}
				
		\item \texttt{List<DocumentMetaData> performLookupQuery(DocumentQueryParameter query)}
		\begin{itemize}
			\item Effect: Computes which of the Recipient's documents matches \ttt{query} and returns the resulting list of \ttt{DocumentMetaData} objects. Note that this list may be empty if none of the Recipient's documents match.
			\item Exceptions: None.
		\end{itemize}

		\item \texttt{void purgePDSOfDocumentsOf(RecipientID recipient) throws NoSuchRecipientException}
		\begin{itemize}
			\item Effect: Removes all documents addressed to the specified Recipient from the Personal Document Store database.
			\item Exceptions:
			\begin{itemize}
				\item NoSuchRecipientException: There are no documents stored in the Personal Document Store database that are addressed to the specified Recipient.
			\end{itemize}
		\end{itemize}
	\end{itemize}

	\item Ping
	\begin{itemize}
		\item \texttt{Echo ping()}
		\begin{itemize}
			\item Effect: Returns an Echo to reassure the caller that the callee is still available.
			\item Exceptions: None.
		\end{itemize}
	\end{itemize}
\end{itemize}

\subsection{PostalDeliveryChannel}
\begin{itemize}
    \item \textbf{Description:} Responsible for delivering documents to Recipients by handing the document to a print \& postal service, also supplying information from SLA negotiated with the Customer Organization pertaining to printing the document. Also signals to the \ttt{JobStatusDatabase} that the document's status must be updated, indicating whether receipt tracking has been activated or not.
    \item \textbf{Super-component:} \ttt{DeliverySubsystem}.
    \item \textbf{Sub-components:} None.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item ChannelDeliverySubmission
    \begin{itemize}
        \item \texttt{void deliverDocument(JobID docID, Document document, DeliveryMetaData metaData)}
        \begin{itemize}
            \item Effect: Extracts the postal address of the Recipient and the \ttt{CustomerOrganizationID} from \ttt{metaData}. Retrieves the \ttt{PrintParameterObject} corresponding to the extracted \ttt{CustomerOrganizationID} from the \ttt{UserManagementSubsystem}. Finally, sends the document along with the Recipient's address and the \ttt{PrintParameterObject} to the print \& postal service.
            \item Exceptions: None
        \end{itemize}
    \end{itemize}
\end{itemize}

\subsection{RawDataVerifier}\label{sec:rawdataverifier}
\begin{itemize}
	\item \textbf{Description:} Verifies raw data batches and their individual entries.
	\item \textbf{Super-component:} \ttt{SubmissionSubsystem}.
	\item \textbf{Sub-components:} None.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
	\item InternalRawDataSubmission
	\begin{itemize}
		\item \texttt{void submitPlannedBatchDetails(BatchDetails batchDetails) throws InvalidBatchException}
		\begin{itemize}
			\item Effect: Verifies whether the Customer Organization (or Social Secretary acting on the Customer Organization's behalf) may submit a batch specified by \ttt{batchDetails}.
			\item Exceptions:
			\begin{itemize}
				\item InvalidBatchException: One of the following occurs:
				\begin{enumerate}
					\item The Customer Organization on whose behalf the batch would be submitted may not submit the specified type of documents.
					\item If this concerns a recurring batch, the number of entries contained in the batch to be submitted exceeds the number of allowed entries.
					\item If this concerns a recurring batch, the Customer Organization is trying to submit the batch too early.
					\item If it is indicated this recurring batch contains corrections of entries the Customer Organization tried to submit earlier, there is no such earlier submission of a recurring batch.
					\item If it is indicated this recurring batch contains corrections of entries the Customer Organization tried to submit earlier, the total number of entries submitted as part of that recurring batch would exceed the number of allowed entries.
				\end{enumerate}
			\end{itemize}
		\end{itemize}
		
		\item \texttt{void submitRawData(RawDataBatch batch) throws NoCorrespondingPlannedBatchException, BatchVerificationException}
		\begin{itemize}
			\item Effect: Verifies the internal consistency of each individual entry and passes the batch to the \ttt{JobGenerator} (minus the entries that did not pass verification). External databases are consulted in order to achieve this (e.g. database of cities and their postal codes). The checks on internal consistency include the following:
			\begin{itemize}
				\item The address provided is consistent with the selected delivery method (e.g. e-mail address with e-mail delivery)
				\item If postal delivery was selected, the city and postal code must be consistent
			\end{itemize}
			\item Exceptions:
			\begin{itemize}
				\item NoCorrespondingPlannedBatchException: there was no call to \texttt{submitPlannedBatchDetails} with a \texttt{BatchDetails} object that corresponds to the given batch
				\item BatchVerficationException: One of the following occurs:
				\begin{enumerate}
					\item The batch was improperly formatted (for example, the batch was a zipfile that could not be opened)
					\item Some individual entries are incorrect; the thrown exception indicates which entries are incorrect and why. Note that all entries that did pass verification were processed correctly.
				\end{enumerate} 
			\end{itemize}
		\end{itemize}
	\end{itemize}
\end{itemize}

\subsection{RegisteredRecipientDatabase}
\begin{itemize}
    \item \textbf{Description:} Responsible for storing the accounts of all Registered Recipients.
    \item \textbf{Super-component:} \ttt{AuthenticableUserManager}.
    \item \textbf{Sub-components:} None.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item RecipientInfoManagement
    \begin{itemize}
        \item \texttt{boolean isRegistered(RecipientID recID)}
        \begin{itemize}
            \item Effect: Indicates whether \ttt{recID} corresponds to a Registered Recipient.
            \item Exceptions: None
        \end{itemize}

		\item \texttt{String getNameOf(RecipientID recID) throws NoSuchRecipientException}
        \begin{itemize}
            \item Effect: Retrieves the first and last name of the Registered Recipient identified by \ttt{recID}.
            \item Exceptions:
			\begin{itemize}
				\item NoSuchRecipientException: There is no Registered Recipient corresponding to \ttt{recID}.
			\end{itemize}
        \end{itemize}

		\item \texttt{PostalAddress getPostalAddressOf(RecipientID recID) throws NoSuchRecipientException}
        \begin{itemize}
            \item Effect: Retrieves the postal address of the Registered Recipient identified by \ttt{recID}.
            \item Exceptions:
			\begin{itemize}
				\item NoSuchRecipientException: There is no Registered Recipient corresponding to \ttt{recID}.
			\end{itemize}
        \end{itemize}
		
        \item \texttt{void verifyNotExists(RegistrationDetails details) throws AlreadyRegisteredException}
        \begin{itemize}
            \item Effect: Verifies that \ttt{details} does not conflict with Recipients that have already been registered
            \item Exceptions:
			\begin{itemize}
				\item AlreadyRegisteredException: There already is a registration corresponding to \ttt{details} (e-mail address is already in use).
			\end{itemize}
        \end{itemize}

		\item \texttt{void registerRecipient(RegistrationDetails details)}
        \begin{itemize}
            \item Effect: Registers a new Registered Recipient with the corresponding \ttt{details}.
            \item Exceptions: None
        \end{itemize}

		\item \texttt{void unregisterRecipient(RecipientID recID) throws NoSuchRecipientException}
        \begin{itemize}
            \item Effect: Unregisters the Registered Recipient identified by \ttt{recID}.
            \item Exceptions:
			\begin{itemize}
				\item NoSuchRecipientException: There is no Registered Recipient corresponding to \ttt{recID}.
			\end{itemize}
        \end{itemize}

		\item \texttt{LoginDetails lookupAuthDetails(RecipientID recID) throws NoSuchRecipientException}
		    \begin{itemize}
                \item Effect: Retrieves the \ttt{LoginDetails} of the Registered Recipient identified by \ttt{recID}.
                \item Exceptions:
				\begin{itemize}
					\item NoSuchRecipientException: There is no Registered Recipient corresponding to \ttt{recID}.
				\end{itemize}
            \end{itemize}
    \end{itemize}
\end{itemize}

\subsection{SigningKeyManager}
\begin{itemize}
    \item \textbf{Description:} Responsible for storing the signing key of all Customer Organizations.
    \item \textbf{Super-component:} \ttt{UserManagementSubsystem}.
    \item \textbf{Sub-components:} None.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item SigningKeyManagement
    \begin{itemize}
        \item \texttt{Key getKey(CustomerOrganizationID coID) throws NoSuchCustomerOrganizationException}
		    \begin{itemize}
                \item Effect: Retrieves the signing key of the Customer Organization identified by \ttt{coID}.
                \item Exceptions: None
            \end{itemize}

		\item \texttt{void setKey(CustomerOrganizationID coID, Key key)}
		    \begin{itemize}
                \item Effect: Sets the key of the Customer Organization identified by \ttt{coID} to \ttt{key}.
                \item Exceptions: None
            \end{itemize}
    \end{itemize}
\end{itemize}

\subsection{SubmissionSubsystem}
\begin{itemize}
    \item \textbf{Description:} The \ttt{SubmissionSubsystem} is responsible for receiving batches of raw data/meta-data and generating jobs from them. These batches may be both recurring and non-recurring. 
    \item \textbf{Super-component:} None.
    \item \textbf{Sub-components:} \ttt{ConnectionManager}, \ttt{JobGenerator}, \ttt{RawDataVerifier}.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item ExternalRawDataSubmission
	\begin{itemize}
		\item \texttt{void openConnection(AuthToken authToken) throws InvalidAuthTokenException}
			 \begin{itemize}
				 \item Effect: Opens a connection, after which the caller may submit batches of raw data/meta-data.
		         \item Exceptions:
		            \begin{itemize}
		                \item InvalidAuthTokenException: \ttt{authToken} is not registered in the system.
		            \end{itemize}
		     \end{itemize}

	    \item \texttt{void submitPlannedBatchDetails(BatchDetails batchDetails) throws NoConnectionException, InvalidBatchException}
	         \begin{itemize}
	             \item Effect: Verifies whether the Customer Organization (or Social Secretary acting on the Customer Organization's behalf) may submit a batch specified by \ttt{batchDetails}.
	             \item Exceptions:
	                \begin{itemize}
	                	\item NoConnectionException: \texttt{openConnection} was not called earlier
	                	\item InvalidBatchException: One of the following occurs:
	                	\begin{enumerate}
	                		\item The Customer Organization on whose behalf the batch would be submitted may not submit the specified type of documents.
		                	\item If this concerns a recurring batch, the number of entries contained in the batch to be submitted exceeds the number of allowed entries.
		                	\item If this concerns a recurring batch, the Customer Organization is trying to submit the batch too early.
		                	\item If it is indicated this recurring batch contains corrections of entries the Customer Organization tried to submit earlier, there is no such earlier submission of a recurring batch.
		                	\item If it is indicated this recurring batch contains corrections of entries the Customer Organization tried to submit earlier, the total number of entries submitted as part of that recurring batch would exceed the number of allowed entries.
	                	\end{enumerate}
	                \end{itemize}
	            \end{itemize}
	            
	    \item \texttt{void submitRawData(RawDataBatch batch) throws NoConnectionException, NoCorrespondingPlannedBatchException, BatchVerificationException}
	     \begin{itemize}
	     	\item Effect: Accepts a raw data batch, verifies the individual entries and generates jobs from them
	     	\item Exceptions:
	     	\begin{itemize}
	     		\item NoConnectionException: \texttt{openConnection} was not called earlier.
	     		\item NoCorrespondingPlannedBatchException: there was no call to \texttt{submitPlannedBatchDetails} with a \texttt{BatchDetails} object that corresponds to the given batch
	     		\item BatchVerficationException: One of the following occurs:
	     		\begin{enumerate}
	     			\item The batch was improperly formatted (for example, the batch was a zipfile that could not be opened)
	     			\item Some individual entries are incorrect; the thrown exception indicates which entries are incorrect and why. Note that all entries that did pass verification were processed correctly.
	     		\end{enumerate} 
	     	\end{itemize}
	     \end{itemize}
    \end{itemize}
    
    \item InternalRawDataSubmission
    \begin{itemize}
    	\item \texttt{void submitPlannedBatchDetails(BatchDetails batchDetails) throws InvalidBatchException}
    	\begin{itemize}
    		\item Effect: Verifies whether the Customer Organization (or Social Secretary acting on the Customer Organization's behalf) may submit a batch specified by \ttt{batchDetails}.
    		\item Exceptions:
    		\begin{itemize}
    			\item InvalidBatchException: One of the following occurs:
    			\begin{enumerate}
    				\item The Customer Organization on whose behalf the batch would be submitted may not submit the specified type of documents.
    				\item If this concerns a recurring batch, the number of entries contained in the batch to be submitted exceeds the number of allowed entries.
    				\item If this concerns a recurring batch, the Customer Organization is trying to submit the batch too early.
    				\item If it is indicated this recurring batch contains corrections of entries the Customer Organization tried to submit earlier, there is no such earlier submission of a recurring batch.
    				\item If it is indicated this recurring batch contains corrections of entries the Customer Organization tried to submit earlier, the total number of entries submitted as part of that recurring batch would exceed the number of allowed entries.
    			\end{enumerate}
    		\end{itemize}
    	\end{itemize}
    	
    	\item \texttt{void submitRawData(RawDataBatch batch) throws NoCorrespondingPlannedBatchException, BatchVerificationException}
    	\begin{itemize}
    		\item Effect: Accepts a raw data batch, verifies the individual entries and generates jobs from them
    		\item Exceptions:
    		\begin{itemize}
    			\item NoCorrespondingPlannedBatchException: there was no call to \texttt{submitPlannedBatchDetails} with a \texttt{BatchDetails} object that corresponds to the given batch
    			\item BatchVerficationException: One of the following occurs:
    			\begin{enumerate}
    				\item The batch was improperly formatted (for example, the batch was a zipfile that could not be opened)
    				\item Some individual entries are incorrect; the thrown exception indicates which entries are incorrect and why. Note that all entries that did pass verification were processed correctly.
    			\end{enumerate} 
    		\end{itemize}
    	\end{itemize}
    \end{itemize}
\end{itemize}

\subsection{TemplateDatabase}
\begin{itemize}
    \item \textbf{Description:} Responsible for storing all templates of all Customer Organizations.
    \item \textbf{Super-component:} \ttt{UserManagementSubsystem}.
    \item \textbf{Sub-components:} None.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item TemplateManagement
    \begin{itemize}
        \item \texttt{Template getTemplate(CustomerOrganizationID coID, DocumentType docType, TimeStamp matchTime) throws NoSuchTemplateException}
        \begin{itemize}
            \item Effect: Retrieves the \ttt{Template} for documents of the type \ttt{docType} of the Customer Organization identified by \ttt{coID}. The exact version retrieved is the most recent version earlier than \ttt{matchTime}.
            \item Exceptions:
            \begin{itemize}
                \item NoSuchTemplateException: The template as described in the above Effect clause does not exist.
            \end{itemize}
        \end{itemize}

		\item \texttt{void updateTemplate(CustomerOrganizationID coID, Template template, DocumentType type)}
		    \begin{itemize}
                \item Effect: Updates the template for documents of \ttt{type} for the Customer Organization identified by \ttt{coID}.
                \item Exceptions: None
            \end{itemize}
    \end{itemize}
\end{itemize}

\subsection{UserInfoEditor}
\begin{itemize}
    \item \textbf{Description:} Responsible for verifying registration details for attempted registrations and storing new accounts in the appropriate databases.
    \item \textbf{Super-component:} \ttt{AuthenticableUserManager}.
    \item \textbf{Sub-components:} None.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
	\item COAdminInfoManagement
    \begin{itemize}
		\item \texttt{void verifyComplete(List<CustomerAdministratorRegistrationDetails> details) throws IncompleteDetailsException}
        \begin{itemize}
            \item Effect: Verifies whether all entries in \ttt{details} are complete.
            \item Exceptions:
            \begin{itemize}
                \item IncompleteDetailsException: Some details are missing (e-mail address, password, document type). It is indicated which entries in \ttt{details} are incomplete.
            \end{itemize}
        \end{itemize}

        \item \texttt{void verifyNotExists(List<CustomerAdministratorRegistrationDetails> details) throws AlreadyExistsException}
        \begin{itemize}
            \item Effect: Verifies whether any entry in \ttt{details} conflicts with Customer Administrators that already exist.
            \item Exceptions:
            \begin{itemize}
                \item AlreadyExistsException: Some entries in \ttt{details} correspond with Customer Administrators that already exist. It is indicated which entries conflict.
            \end{itemize}
        \end{itemize}

        \item \texttt{void registerAdministrators(List<CustomerAdministratorRegistrationDetails> details)}
        \begin{itemize}
            \item Effect: Registers all Customer Administrators with corresponding details found in \ttt{details}.
            \item Exceptions: None
        \end{itemize}

		\item \texttt{EmailAddress getCOAdminEmail(CustomerOrganizationID coID, DocumentType type) throws NoSuchAdministratorException}
		    \begin{itemize}
                \item Effect: Retrieves the e-mail address of the Customer Administrator of the Customer Organization identified by \ttt{coID} who is responsible for documents of \ttt{type}.
                \item Exceptions:
				\begin{itemize}
					\item NoSuchAdministratorException: There is no Customer Administrator responsible for \ttt{type}.
				\end{itemize}
            \end{itemize}
    \end{itemize}

    \item RecipientInfoManagement
    \begin{itemize}
        \item \texttt{boolean isRegistered(RecipientID recID)}
        \begin{itemize}
            \item Effect: Indicates whether \ttt{recID} corresponds to a Registered Recipient.
            \item Exceptions: None
        \end{itemize}

		\item \texttt{String getNameOf(RecipientID recID) throws NoSuchRecipientException}
        \begin{itemize}
            \item Effect: Retrieves the first and last name of the Registered Recipient identified by \ttt{recID}.
            \item Exceptions:
			\begin{itemize}
				\item NoSuchRecipientException: There is no Registered Recipient corresponding to \ttt{recID}.
			\end{itemize}
        \end{itemize}

		\item \texttt{PostalAddress getPostalAddressOf(RecipientID recID) throws NoSuchRecipientException}
        \begin{itemize}
            \item Effect: Retrieves the postal address of the Registered Recipient identified by \ttt{recID}.
            \item Exceptions:
			\begin{itemize}
				\item NoSuchRecipientException: There is no Registered Recipient corresponding to \ttt{recID}.
			\end{itemize}
        \end{itemize}

		\item \texttt{void verifyComplete(RegistrationDetails details) throws IncompleteRecipientDetailsException}
        \begin{itemize}
            \item Effect: Verifies that \ttt{details} is complete.
            \item Exceptions:
			\begin{itemize}
				\item IncompleteRecipientDetailsException: Some details are missing (e-mail address, password, first or last name, postal address).
			\end{itemize}
        \end{itemize}
		
        \item \texttt{void verifyNotExists(RegistrationDetails details) throws AlreadyRegisteredException}
        \begin{itemize}
            \item Effect: Verifies that \ttt{details} does not conflict with Recipients that have already been registered
            \item Exceptions:
			\begin{itemize}
				\item AlreadyRegisteredException: There already is a registration corresponding to \ttt{details} (e-mail address is already in use).
			\end{itemize}
        \end{itemize}

		\item \texttt{void registerRecipient(RegistrationDetails details)}
        \begin{itemize}
            \item Effect: Registers a new Registered Recipient with the corresponding \ttt{details}.
            \item Exceptions: None
        \end{itemize}
    \end{itemize}
\end{itemize}

\subsection{UserManagementSubsystem}
\begin{itemize}
    \item \textbf{Description:} Responsible for storing information about Customer Organizations and the account details of Customer Administrators, Registered Recipients and eDocs Administrators.
    \item \textbf{Super-component:} None.
    \item \textbf{Sub-components:} \ttt{AuthenticableUserManager}, \ttt{CustomerOrganizationDatabase}, \ttt{SigningKeyManager}, \ttt{TemplateDatabase}.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item COInfoManagement
    \begin{itemize}
		\item \texttt{boolean verifyExists(CustomerOrganizationID coID)}
		    \begin{itemize}
                \item Effect: Indicates whether a Customer Organization corresponding to \ttt{coID} has been registered.
                \item Exceptions: None
            \end{itemize}
		
        \item \texttt{Template getTemplate(CustomerOrganizationID coID, DocumentType docType, TimeStamp matchTime) throws NoSuchCustomerOrganizationException, NoSuchTemplateException}
        \begin{itemize}
            \item Effect: Retrieves the \ttt{Template} for documents of the type \ttt{docType} of the Customer Organization identified by \ttt{coID}. The exact version retrieved is the most recent version earlier than \ttt{matchTime}.
            \item Exceptions:
            \begin{itemize}
                \item NoSuchTemplateException: The template as described in the above Effect clause does not exist.
				\item NoSuchCustomerOrganizationException: There is no Customer Organization corresponding to \ttt{coID}.
            \end{itemize}
        \end{itemize}

		\item \texttt{void updateTemplate(CustomerOrganizationID coID, Template template, DocumentType type) throws NoSuchCustomerOrganizationException, InvalidDocumentTypeException}
		    \begin{itemize}
                \item Effect: Updates the template for documents of \ttt{type} for the Customer Organization identified by \ttt{coID}.
                \item Exceptions:
				\begin{itemize}
					\item InvalidDocumentTypeException: The Customer Organization identified by \ttt{coID} is not allowed to generate documents of \ttt{type}.
					\item NoSuchCustomerOrganizationException: There is no Customer Organization corresponding to \ttt{coID}.
				\end{itemize}
            \end{itemize}

        \item \texttt{Key getKey(CustomerOrganizationID coID) throws NoSuchCustomerOrganizationException}
		    \begin{itemize}
                \item Effect: Retrieves the signing key of the Customer Organization identified by \ttt{coID}.
                \item Exceptions:
				\begin{itemize}
					\item NoSuchCustomerOrganizationException: There is no Customer Organization corresponding to \ttt{coID}.
				\end{itemize}
            \end{itemize}

		\item \texttt{Priority getDefaultPriority(CustomerOrganizationID coID) throws NoSuchCustomerOrganizationException}
		    \begin{itemize}
                \item Effect: Retrieves the default priority of the Customer Organization identified by \ttt{coID}.
                \item Exceptions:
				\begin{itemize}
					\item NoSuchCustomerOrganizationException: There is no Customer Organization corresponding to \ttt{coID}.
				\end{itemize}
            \end{itemize}

		\item \texttt{boolean queryReceiptTracking(CustomerOrganizationID coID) throws NoSuchCustomerOrganizationException}
		    \begin{itemize}
                \item Effect: Indicates whether the Customer Organization identified by \ttt{coID} has enabled receipt tracking.
                \item Exceptions:
				\begin{itemize}
					\item NoSuchCustomerOrganizationException: There is no Customer Organization corresponding to \ttt{coID}.
				\end{itemize}
            \end{itemize}

		\item \texttt{boolean canGenerateDocumentsOfType(CustomerOrganizationID coID, DocumentType type) throws NoSuchCustomerOrganizationException}
		    \begin{itemize}
                \item Effect: Indicates whether the Customer Organization identified by \ttt{coID} may generate documents of \ttt{type}.
                \item Exceptions:
				\begin{itemize}
					\item NoSuchCustomerOrganizationException: There is no Customer Organization corresponding to \ttt{coID}.
				\end{itemize}
            \end{itemize}

		\item \texttt{List<DocumentType> getAllAllowedDocTypes(CustomerOrganizationID coID) throws NoSuchCustomerOrganizationException}
		    \begin{itemize}
                \item Effect: Retrieves the document types the Customer Organization identified by \ttt{coID} may generate.
                \item Exceptions:
				\begin{itemize}
					\item NoSuchCustomerOrganizationException: There is no Customer Organization corresponding to \ttt{coID}.
				\end{itemize}
            \end{itemize}

		\item \texttt{EmailAddress getCOAdminEmail(CustomerOrganizationID coID, DocumentType type) throws NoSuchCustomerOrganizationException, NoSuchAdministratorException}
		    \begin{itemize}
                \item Effect: Retrieves the e-mail address of the Customer Administrator of the Customer Organization identified by \ttt{coID} who is responsible for documents of \ttt{type}.
                \item Exceptions:
				\begin{itemize}
					\item NoSuchCustomerOrganizationException: There is no Customer Organization corresponding to \ttt{coID}.
					\item NoSuchAdministratorException: There is no Customer Administrator responsible for \ttt{type}.
				\end{itemize}
            \end{itemize}

		\item \texttt{BankAccountNumber getCOBankAccountNumber(CustomerOrganizationID coID) throws NoSuchCustomerOrganizationException}
		    \begin{itemize}
                \item Effect: Retrieves the bank account number of the Customer Organization identified by \ttt{coID} which the eDocs system should bill.
                \item Exceptions:
				\begin{itemize}
					\item NoSuchCustomerOrganizationException: There is no Customer Organization corresponding to \ttt{coID}.
				\end{itemize}
            \end{itemize}

		\item \texttt{PrintParameterObject getPrintParameters(CustomerOrganizationID coID) throws NoSuchCustomerOrganizationException}
		    \begin{itemize}
                \item Effect: Retrieves the \ttt{PrintParameterObject} of the Customer Organization identified by \ttt{coID}.
                \item Exceptions:
				\begin{itemize}
					\item NoSuchCustomerOrganizationException: There is no Customer Organization corresponding to \ttt{coID}.
				\end{itemize}
            \end{itemize}

		\item \texttt{RecurringBatchSpecification getRecurringBatchSpecification(CustomerOrganizationID coID, RecurringBatchID) throws NoSuchCustomerOrganizationException, NoSuchRecurringBatchException}
		    \begin{itemize}
                \item Effect: Retrieves the \ttt{RecurringBatchSpecification} of the recurring batch identified by \ttt{RecurringBatchID}.
                \item Exceptions:
					\begin{itemize}
						\item NoSuchRecurringBatchException: Either there is no recurring batch matching \ttt{RecurringBatchID} or that batch does not belong to the Customer Organization identified by \ttt{coID}.
						\item NoSuchCustomerOrganizationException: There is no Customer Organization corresponding to \ttt{coID}.
					\end{itemize}
            \end{itemize}

		\item \texttt{void registerNewCustomerOrganization(CustomerOrganizationRegistrationDetails details) throws IncorrectRegistrationDetailsException}
		    \begin{itemize}
                \item Effect: Registers a new Customer Organization with the details specified in \ttt{details}.
                \item Exceptions:
				\begin{itemize}
					\item IncorrectRegistrationDetailsException: Either \ttt{details} is incomplete (e.g. no signing key) or incorrect (e.g. the e-mail address for a new Customer Administrator has already been used for another Customer Administrator). The exception indicates what exactly went wrong.
				\end{itemize}
            \end{itemize}

		\item \texttt{void unregisterCustomerOrganization(CustomerOrganizationID coID) throws NoSuchCustomerOrganizationException}
		    \begin{itemize}
                \item Effect: Unregisters the Customer Organization identified by \ttt{coID}.
                \item Exceptions:
				\begin{itemize}
					\item NoSuchCustomerOrganizationException: There is no Customer Organization corresponding to \ttt{coID}.
				\end{itemize}
            \end{itemize}
    \end{itemize}

    \item RecipientInfoManagement
    \begin{itemize}
        \item \texttt{boolean isRegistered(RecipientID recID)}
        \begin{itemize}
            \item Effect: Indicates whether \ttt{recID} corresponds to a Registered Recipient.
            \item Exceptions: None
        \end{itemize}

		\item \texttt{String getNameOf(RecipientID recID) throws NoSuchRecipientException}
        \begin{itemize}
            \item Effect: Retrieves the first and last name of the Registered Recipient identified by \ttt{recID}.
            \item Exceptions:
			\begin{itemize}
				\item NoSuchRecipientException: There is no Registered Recipient corresponding to \ttt{recID}.
			\end{itemize}
        \end{itemize}

		\item \texttt{PostalAddress getPostalAddressOf(RecipientID recID) throws NoSuchRecipientException}
        \begin{itemize}
            \item Effect: Retrieves the postal address of the Registered Recipient identified by \ttt{recID}.
            \item Exceptions:
			\begin{itemize}
				\item NoSuchRecipientException: There is no Registered Recipient corresponding to \ttt{recID}.
			\end{itemize}
        \end{itemize}

		\item \texttt{void verifyComplete(RegistrationDetails details) throws IncompleteRecipientDetailsException}
        \begin{itemize}
            \item Effect: Verifies that \ttt{details} is complete.
            \item Exceptions:
			\begin{itemize}
				\item IncompleteRecipientDetailsException: Some details are missing (e-mail address, password, first or last name, postal address).
			\end{itemize}
        \end{itemize}
		
        \item \texttt{void verifyNotExists(RegistrationDetails details) throws AlreadyRegisteredException}
        \begin{itemize}
            \item Effect: Verifies that \ttt{details} does not conflict with Recipients that have already been registered
            \item Exceptions:
			\begin{itemize}
				\item AlreadyRegisteredException: There already is a registration corresponding to \ttt{details} (e-mail address is already in use).
			\end{itemize}
        \end{itemize}

		\item \texttt{void registerRecipient(RegistrationDetails details)}
        \begin{itemize}
            \item Effect: Registers a new Registered Recipient with the corresponding \ttt{details}.
            \item Exceptions: None
        \end{itemize}
    \end{itemize}

	\item UIAuthManagement
    \begin{itemize}
        \item \texttt{void authenticate(LoginCredentials cred) throws AuthException}
        \begin{itemize}
            \item Effect: Authenticates the login attempt with the credentials contained in \ttt{cred}. If successful, generates a login token valid for a limited time.
            \item Exceptions:
			\begin{itemize}
				\item AuthException: Either the account specified in \ttt{cred} does not exists or the password is incorrect.
			\end{itemize}
        \end{itemize}
    \end{itemize}
\end{itemize}

\subsection{ZoomitDeliveryChannel}
\begin{itemize}
    \item \textbf{Description:} Responsible for delivering documents to Recipients via Zoomit. If the Zoomit service is down, it must cache documents until it comes back on-line. Also signals to the \ttt{JobStatusDatabase} that the document's status must be updated, indicating whether receipt tracking has been activated or not.
    \item \textbf{Super-component:} \ttt{DeliverySubsystem}.
    \item \textbf{Sub-components:} \ttt{ZoomitDeliveryHandler}, \ttt{ZoomitDocumentLinkCache}.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item ChannelDeliverySubmission
    \begin{itemize}
        \item \texttt{void deliverDocument(JobID docID, Document document, DeliveryMetaData metaData)}
        \begin{itemize}
            \item Effect: Extracts the Recipient's bank account number from \ttt{metaData}. Sends the document to Zoomit along with the identifying bank account number and the Customer Organization's name. If Zoomit does not confirm, retries several times via exponential back-off before giving up and caching the document.
            \item Exceptions: None
        \end{itemize}
    \end{itemize}
\end{itemize}

\subsection{ZoomitDeliveryHandler}
\begin{itemize}
    \item \textbf{Description:} Responsible for delivering documents to Recipients via Zoomit. If the Zoomit service is down, it must cache documents in the \ttt{ZoomitDocumentLinkCache} until it comes back on-line. Also signals to the \ttt{JobStatusDatabase} that the document's status must be updated, indicating whether receipt tracking has been activated or not.
    \item \textbf{Super-component:} \ttt{ZoomitDeliveryChannel}.
    \item \textbf{Sub-components:} None.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item ChannelDeliverySubmission
    \begin{itemize}
        \item \texttt{void deliverDocument(JobID docID, Document document, DeliveryMetaData metaData)}
        \begin{itemize}
            \item Effect: Extracts the Recipient's bank account number from \ttt{metaData}. Sends the document to Zoomit along with the identifying bank account number and the Customer Organization's name. If Zoomit does not confirm, retries several times via exponential back-off before giving up and caching the document in the \ttt{ZoomitDocumentLinkCache}.
            \item Exceptions: None
        \end{itemize}
    \end{itemize}
\end{itemize}

\subsection{ZoomitDocumentLinkCache}
\begin{itemize}
    \item \textbf{Description:} Responsible for caching \ttt{JobID}s of documents that must be delivered via Zoomit, along with accompanying \ttt{DeliveryMetaData}.
    \item \textbf{Super-component:} \ttt{ZoomitDeliveryChannel}.
    \item \textbf{Sub-components:} None.
\end{itemize}

\subsubsection*{Provided interfaces}
\begin{itemize}
    \item ChannelDeliverySubmission
    \begin{itemize}
        \item \texttt{void cacheDocumentID(JobID docID, DeliveryMetaData metaData)}
        \begin{itemize}
            \item Effect: Stores \ttt{docID} and accompanying \ttt{metaData} in the cache.
            \item Exceptions: None
        \end{itemize}

		\item \texttt{List<Tuple<JobID, DeliveryMetaData>> flushCache()}
        \begin{itemize}
            \item Effect: Retrives and removes all \ttt{JobID}s and accompanying \ttt{DeliveryMetaData} from the cache.
            \item Exceptions: None
        \end{itemize}
    \end{itemize}
\end{itemize}